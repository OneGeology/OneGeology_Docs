<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using MapServer &mdash; OneGeology Documentation 1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/OneGeology_favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using ArcMap" href="esri.html" />
    <link rel="prev" title="Using GeoServer" href="geoserver.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> OneGeology Documentation
            <img src="../../_static/Onegeology_logo_large.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../providingdata.html">Providing Data / Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../service_types.html">Service Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_formats.html">Data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_content.html">Data content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_preparation.html">Data preparation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_preparation.html#scanning-a-paper-map">Scanning a paper map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#scanning">Scanning</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#step-1">Step 1</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#step-2a">Step 2A</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#step-2b">Step 2B</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#step-2c">Step 2C</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#step-3-stitching">Step 3 ~ Stitching</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#georeferencing-a-scanned-map">Georeferencing a scanned map</a></li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#image-formats-and-transparency">Image formats and transparency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#the-legend-for-the-scanned-map">The legend for the scanned map</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../data_preparation.html#lite-schemas">Lite Schemas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geosciml-lite">GeoSciML-Lite</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#contactview-features">ContactView features</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#sheardisplacementstructureview-features">ShearDisplacementStructureView features</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologicunitview-features">GeologicUnitView features</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#boreholeview-features">BoreholeView features</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#earthresourceml-lite">EarthResourceML-Lite</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#mineraloccurrenceview-features">MineralOccurrenceView features</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#commodityresourceview-features">CommodityResourceView features</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../data_preparation.html#complex-feature-data">Complex Feature Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#mapped-feature-and-geologic-feature">Mapped Feature and Geologic Feature</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#mapped-feature-mapping-frame">Mapped Feature - mapping frame</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#mapped-feature-geometry-shape">Mapped Feature - geometry (shape)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-feature-inspireid">Geologic Feature - inspireId</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-feature-name">Geologic Feature - name</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geologic-age">Geologic Age</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-event-name">Geologic Event - name</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-event-youngernamedage-and-oldernamedage">Geologic Event - youngerNamedAge and olderNamedAge</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-event-eventprocess">Geologic Event - eventProcess</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-event-eventenvironment">Geologic Event - eventEnvironment</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geologic-unit-and-earth-material">Geologic Unit and Earth Material</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-unit-geologic-unit-type">Geologic Unit - geologic unit type</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-unit-composition">Geologic Unit - composition</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#composition-part-role">Composition Part - role</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#composition-part-proportion">Composition Part - proportion</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#composition-part-material">Composition Part - material</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#rock-material-lithology">Rock Material -lithology</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geologic-structure">Geologic Structure</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#shear-displacement-structure-faulttype">Shear Displacement Structure - faultType</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#fold-profiletype">Fold - profileType</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geomorphologic-feature">Geomorphologic Feature</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#natural-geomorphologic-feature-naturalgeomorphologicfeaturetype">Natural Geomorphologic Feature - NaturalGeomorphologicFeatureType</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#natural-geomorphologic-feature-activity">Natural Geomorphologic Feature - activity</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#anthropogenic-geomorphologic-feature-anthropogenicgeomorphologicfeaturetype">Anthropogenic Geomorphologic Feature - AnthropogenicGeomorphologicFeatureType</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#thematic-class">Thematic Class</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-feature-classifier">Geologic Feature - classifier</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#borehole">Borehole</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-inspireid">Borehole - inspireId</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-sampledfeature">Borehole - sampledFeature</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-downholegeometry">Borehole - downholeGeometry</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-location-and-elevation">Borehole - location and elevation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-purpose">Borehole - purpose</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-boreholelength">Borehole - boreholeLength</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#borehole-interval-mappingframe">Borehole Interval - mappingFrame</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#boreholeinterval-geometry-shape">BoreholeInterval - geometry (shape)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#boreholeinterval-specification">BoreholeInterval - specification</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#boreholeinterval-mappedintervalbegin-mappedintervalend">BoreholeInterval - mappedIntervalBegin &amp; mappedIntervalEnd</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../data_preparation.html#geologic-collection">Geologic Collection</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-collection-inspireid">Geologic Collection - inspireId</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologiccollection-name">GeologicCollection - name</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-collection-collectiontype">Geologic Collection - collectionType</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-collection-member">Geologic Collection - member</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#md-metadata-contact">MD_Metadata - contact</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#md-metadata-datestamp">MD_Metadata - dateStamp</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-collection-reference">Geologic Collection - reference</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../data_preparation.html#documentcitation-name">DocumentCitation - name</a></li>
<li class="toctree-l6"><a class="reference internal" href="../data_preparation.html#documentcitation-shortname">DocumentCitation - shortName</a></li>
<li class="toctree-l6"><a class="reference internal" href="../data_preparation.html#document-citation-date">Document Citation - date</a></li>
<li class="toctree-l6"><a class="reference internal" href="../data_preparation.html#documentcitation-link">DocumentCitation - link</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#geologic-collection-beginlifespanversion-endlifespanversion">Geologic Collection - beginLifespanVersion &amp; endLifespanVersion</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#md-dataidentification-abstract">MD_DataIdentification - abstract</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#md-dataidentification-language">MD_DataIdentification - language</a></li>
<li class="toctree-l5"><a class="reference internal" href="../data_preparation.html#md-dataidentification-topiccategory">MD_DataIdentification - topicCategory</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../onegeology_profile.html">OneGeology Profile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../onegeology_profile.html#ogc-service-level-metadata">OGC service level metadata</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#service-title">Service title</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#service-abstract">Service abstract</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#fees">Fees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#access-constraints">Access constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#keywords">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#contact-information">Contact information</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#data-provider">Data provider</a></li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#online-resource">Online resource</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../onegeology_profile.html#layer-coverage-feature-metadata">Layer / Coverage / Feature metadata</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#wms-layer-and-wcs-coverage-naming">WMS layer and WCS coverage naming</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#geographic-extent">Geographic extent</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#data-owner">Data owner</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#language">Language</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#scale">Scale</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#theme">Theme</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#layer-title-examples">Layer title examples</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#layer-name-examples">Layer name examples</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#inspire-layer-naming-considerations">INSPIRE layer naming considerations</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#summary-of-layer-coverage-feature-metadata">Summary of layer/coverage/feature metadata</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#machine-readable-name">Machine readable name</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#human-readable-name">Human readable name</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#abstract">Abstract</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#service-provision-onegeology-profile-layer-keywords">Keywords</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#wms-specific-metadata">WMS Specific Metadata</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#extent">Extent</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#spatial-coordinate-reference-system">Spatial/Coordinate reference system</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#boundingbox">BoundingBox</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#dataurl-optional">DataURL (optional)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#metadataurl-optional">MetadataURL (optional)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#legend-url">Legend url</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#layer-styling-information">Layer styling information</a></li>
<li class="toctree-l5"><a class="reference internal" href="../onegeology_profile.html#wms-getfeatureinfo-response">WMS GetFeatureInfo response</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../onegeology_profile.html#core-tc211-iso-19115-metadata">Core TC211/ISO:19115 Metadata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../server_setup.html">Setting up a Server</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="example_data.html">Cookbook example data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="example_data.html#geopackage">GeoPackage</a></li>
<li class="toctree-l4"><a class="reference internal" href="example_data.html#postgis-data">PostGIS data</a><ul>
<li class="toctree-l5"><a class="reference internal" href="example_data.html#installing-postgis">Installing PostGIS</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="example_data.html#image-with-world-file">Image with world file</a></li>
<li class="toctree-l4"><a class="reference internal" href="example_data.html#shapefile">Shapefile</a><ul>
<li class="toctree-l5"><a class="reference internal" href="example_data.html#recommended-esri-shapefile-definitions-for-geosciml-lite">Recommended ESRI shapefile definitions for GeoSciML-Lite</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="example_data.html#geotiff">GeoTIFF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="geoserver.html">Using GeoServer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#introduction">Introduction</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#pre-requisites-system-requirements">Pre-requisites / System Requirements</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#software-installation">Software Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#assumptions">Assumptions</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#basic-installation">Basic Installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#app-schema-plugin-installation">App-schema Plugin Installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#inspire-plugin-installation">INSPIRE Plugin Installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#database">Database</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#common-setup">Common Setup</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#logging-in">Logging in</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#editing-contact-information-metadata">Editing contact information metadata</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#workspaces">Workspaces</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#example-data">Example Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#simple-wms">Simple WMS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#inspire-extended-capabilities">INSPIRE Extended Capabilities</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#configuring-a-data-store">Configuring a data store</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#adding-layers-to-a-workspace">Adding layers to a workspace</a><ul>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#the-data-tab-of-the-edit-layer-page">The Data tab of the Edit Layer page</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#the-publishing-tab-of-the-edit-layer-page">The Publishing tab of the Edit Layer page</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#creating-group-layers">Creating group layers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#sld-enabled-wms">SLD enabled WMS</a></li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#simple-feature-wfs">Simple Feature WFS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#using-application-schemas-extension">Using application schemas extension</a><ul>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#create-mapping-file">Create mapping file</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#edit-datastore-xml-file">Edit datastore.xml file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#complex-feature-wfs">Complex Feature WFS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#obtaining-example-configuration">Obtaining example configuration</a><ul>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#complex-feature-test-requests">Complex Feature Test requests</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#id14">INSPIRE Extended Capabilities</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#inspire-pre-defined-dataset-download">INSPIRE Pre-defined Dataset Download</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#app-schema-properties">app-schema.properties</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#data-directory">Data directory</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#workspace-layout">Workspace layout</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#datastore-xml">datastore.xml</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#mapping-files">Mapping files</a><ul>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#namespaces">Namespaces</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#source-data-store">Source data store</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#target-types">Target types</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#mappings">Mappings</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#gml-id-mapping">gml:id mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#inspireid-mapping">inspireId mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#ordinary-mapping">Ordinary mapping</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#client-properties">Client properties</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#feature-chaining">Feature chaining</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#polymorphism">Polymorphism</a></li>
<li class="toctree-l6"><a class="reference internal" href="geoserver.html#inspire-geology-theme-schema">INSPIRE Geology Theme Schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#wcs">WCS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#exemplar-data-used-in-this-cookbook">Exemplar data used in this cookbook</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#metadata-to-be-used-in-configuring-your-service-and-coverages-layers">Metadata to be used in configuring your service and coverages (layers)</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#id22">Stores</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#id23">Layers</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#service-level-metadata">Service level metadata</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#id24">INSPIRE Extended Capabilities</a></li>
<li class="toctree-l5"><a class="reference internal" href="geoserver.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="geoserver.html#geoserver-troubleshooting">GeoServer troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using MapServer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#software-installation">Software Installation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#installing-ms4w">Installing MS4W</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#configuring-the-exemplar-services">Configuring the exemplar services</a></li>
<li class="toctree-l6"><a class="reference internal" href="#configuring-your-own-services-using-the-exemplars-as-examples">Configuring your own services using the exemplars as examples</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#installing-and-configuring-apache-http-web-server">Installing and configuring Apache HTTP web server</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#bit-apache-http-server">64-bit Apache HTTP server</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#installing-gisinternals-packages-for-windows">Installing GISInternals packages for Windows</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#data">Data</a></li>
<li class="toctree-l6"><a class="reference internal" href="#mapserver-cgi-bin">MapServer cgi-bin</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#installing-mapserver-on-linux-using-ppas">Installing MapServer on Linux using PPAs</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#configuring-mapserver-exemplar-services-on-a-lamp-server">Configuring MapServer exemplar services on a LAMP server</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#alternative-mapserver-configurations">Alternative MapServer configurations</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#mapserver-and-iis">MapServer and IIS</a></li>
<li class="toctree-l6"><a class="reference internal" href="#compiling-mapserver-on-linux">Compiling MapServer on Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#general-configuration">General configuration</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#adding-alternate-character-set-support">Adding alternate character set support</a></li>
<li class="toctree-l5"><a class="reference internal" href="#creating-your-own-symbology">Creating your own symbology</a></li>
<li class="toctree-l5"><a class="reference internal" href="#example-include-files">Example include files</a></li>
<li class="toctree-l5"><a class="reference internal" href="#debugging-common-errors">Debugging common errors</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#symbol-definition-error">Symbol definition error</a></li>
<li class="toctree-l6"><a class="reference internal" href="#unknown-identifier">Unknown identifier</a></li>
<li class="toctree-l6"><a class="reference internal" href="#missing-magic-string">Missing magic string</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#connecting-to-a-database">Connecting to a database</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#wms">WMS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#raster-image-data-exemplar-layer-configuration">Raster image data exemplar (LAYER configuration)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#vector-data-exemplar-layer-configuration">Vector data exemplar (LAYER configuration)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#configuring-html-query-templates">Configuring HTML query templates</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#debugging-your-requests">Debugging your requests</a></li>
<li class="toctree-l6"><a class="reference internal" href="#handling-fields-for-which-you-have-no-data">Handling fields for which you have no data</a></li>
<li class="toctree-l6"><a class="reference internal" href="#using-javascript">Using JavaScript</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#configuring-group-layering">Configuring group layering</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#simple-feature-wfs">Simple feature WFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wcs">WCS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inspire-metadata">INSPIRE metadata</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="esri.html">Using ArcMap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="esri.html#wms">WMS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="esri.html#creating-the-service">Creating the service</a><ul>
<li class="toctree-l6"><a class="reference internal" href="esri.html#prepare-the-map-document">Prepare the map document</a></li>
<li class="toctree-l6"><a class="reference internal" href="esri.html#publishing-your-wms">Publishing your WMS</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="esri.html#edit-the-getcapabilities-documents">Edit the GetCapabilities documents</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri.html#inspire">INSPIRE</a><ul>
<li class="toctree-l6"><a class="reference internal" href="esri.html#arcgis-server">ArcGIS Server</a></li>
<li class="toctree-l6"><a class="reference internal" href="esri.html#inspire-extension">INSPIRE Extension</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="esri.html#arcgis-server-issues">ArcGIS server issues</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="esri.html#simple-feature-wfs">Simple Feature WFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="esri.html#wcs">WCS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="esri.html#create-a-map-document">Create a map document</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri.html#publish-the-wcs-service">Publish the WCS service</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri.html#edit-the-getcapabilities-document">Edit the GetCapabilities document</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="esri_pro.html">Using ArcGIS Pro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="esri_pro.html#wms">WMS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#creating-the-service">Creating the service</a><ul>
<li class="toctree-l6"><a class="reference internal" href="esri_pro.html#prepare-the-map-document">Prepare the map document</a></li>
<li class="toctree-l6"><a class="reference internal" href="esri_pro.html#publishing-your-wms">Publishing your WMS</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#edit-the-getcapabilities-documents">Edit the GetCapabilities documents</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#inspire">INSPIRE</a><ul>
<li class="toctree-l6"><a class="reference internal" href="esri_pro.html#arcgis-server">ArcGIS Server</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#arcgis-server-issues">ArcGIS server issues</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="esri_pro.html#simple-feature-wfs">Simple Feature WFS</a></li>
<li class="toctree-l4"><a class="reference internal" href="esri_pro.html#wcs">WCS</a><ul>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#create-a-map-document">Create a map document</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#publish-the-wcs-service">Publish the WCS service</a></li>
<li class="toctree-l5"><a class="reference internal" href="esri_pro.html#edit-the-getcapabilities-document">Edit the GetCapabilities document</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="apache.html">Using Apache HTTP server as a reverse proxy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../using.html">Using OneGeology Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../using/portal.html">Using the OneGeology Portal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/portal.html#viewing-data-registered-in-the-onegeology-portal">Viewing data registered in the OneGeology Portal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#go-to-function">Go To Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#viewing-layers-in-different-projections">Viewing layers in different projections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../using/portal.html#reviewing-external-map-data">Reviewing external map data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/portal.html#exporting-to-keyhole-markup-language-kml">Exporting to Keyhole Markup Language (KML)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/portal.html#creating-and-using-web-map-context-wmc-documents">Creating and using Web Map Context (WMC) documents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#saving-your-context-file">Saving your context file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#opening-a-web-map-context-file-in-the-onegeology-portal">Opening a Web Map Context file in the OneGeology Portal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#opening-a-wmc-file-in-other-clients">Opening a WMC file in other clients</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#known-issues">Known issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../using/portal.html#analysis-tools">Analysis tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#portrayal-services">Portrayal Services</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../using/portal.html#geosciml">GeoSciML</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../using/portal.html#earthresourceml-lite">EarthResourceML-Lite</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../using/portal.html#statistics">Statistics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../using/qgis.html">Using QGIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/qgis.html#using-qgis-to-view-wms">Using QGIS to view WMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/qgis.html#using-qgis-to-access-simple-feature-wfs">Using QGIS to access simple feature WFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/qgis.html#using-qgis-to-view-wcs">Using QGIS to view WCS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../using/esri.html">Using ESRI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/esri.html#using-arccatalog">Using ArcCatalog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wms-service-connection">WMS Service Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wfs-service-connection">WFS Service Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wcs-service-connection">WCS Service Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../using/esri.html#using-arcmap">Using ArcMap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wms-layers">WMS Layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wfs-layers">WFS Layers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/esri.html#wcs-layers">WCS Layers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../using/esri_pro.html">Using ArcGIS Pro</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/esri_pro.html#wms-service-connection">WMS Service Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/esri_pro.html#wfs-service-connection">WFS Service Connection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../using/udig.html">Using uDig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../using/gaia.html">Using Gaia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../using/world_wind.html">Using NASA World Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../using/dapple.html">Using Dapple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../using/google_earth.html">Using Google Earth</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/google_earth.html#google-earth-issues">Google Earth Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../using/google_earth.html#problems-displaying-the-map-layer">Problems displaying the map layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../using/google_earth.html#problems-displaying-a-map-layer-that-spans-the-globe">Problems displaying a map layer that spans the globe</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../using/mapinfo.html">Using MapInfo Professional</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../using/mapinfo.html#to-add-a-wms-service-to-the-list-of-available-wms-services">To add a WMS service to the list of available WMS services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/mapinfo.html#to-view-wms-service-layers">To view WMS service layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../using/mapinfo.html#to-query-wms-service-layer">To query WMS service layer</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OneGeology Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../providingdata.html">Providing Data / Services</a></li>
          <li class="breadcrumb-item"><a href="../server_setup.html">Setting up a Server</a></li>
      <li class="breadcrumb-item active">Using MapServer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/providingdata/server_setup/mapserver.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-mapserver">
<h1>Using MapServer<a class="headerlink" href="#using-mapserver" title="Permalink to this heading"></a></h1>
<section id="software-installation">
<h2>Software Installation<a class="headerlink" href="#software-installation" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="http://mapserver.org/">MapServer</a> can be used to provide a number of OGC Web Services (OWS) types, such as the Web Map Service (WMS), Web Feature Service (WFS) and Web Coverage Service (WCS) standards which are the current focus of interest for the OneGeology portal.  In the following sections we run through how to configure MapServer so it can provide any one of these three service types.</p>
<p>MapServer will work both on Windows and Linux operating systems (both 32-bit and 64-bit), and with a web server of your choosing, the permutations are many and we can not cover all of them, below we take you through some common installations, using Apache HTTP as the web server.</p>
<p>The simplest way to set up MapServer on a Windows server is to use the MapServer for Windows (MS4W) installer provided by Gateway Geomatics, this installs a 32-bit version of the Apache HTTP web server and the 32-bit version of MapServer as well as some demo applications.  For those wishing to use a 64-bit version of Apache HTTP web server, we recommend Apache Lounge and GISInternals.  For installation of MapServer on Linux, (with Apache HTTP web server) we recommend Ubuntu and the Personal Package Archives.</p>
<section id="installing-ms4w">
<h3>Installing MS4W<a class="headerlink" href="#installing-ms4w" title="Permalink to this heading"></a></h3>
<p>All versions of the MS4W software package, including the latest version are available from the <a class="reference external" href="https://ms4w.com/">Gateway Geomatics MS4W</a>  web site.</p>
<p>Two options are available, a downloadable zip of all the appropriate binaries or an installer.  We will use the installer here as it the easiest option for those setting up a OneGeology service for the first time.  The installer is available from the <a class="reference external" href="https://ms4w.com/download.html">Download Packages</a> page. Download the latest setup file, for us this was ms4w-3.2.2-setup.exe, to a temporary location on your server.</p>
<figure class="align-default">
<img alt="../../_images/ms4w-setup.png" src="../../_images/ms4w-setup.png" />
</figure>
<p>Run the setup.exe file as an Administrator.  A small dialogue window will pop-up appear detailing the licensing agreement. Please take the time to read the license, and if you accept the conditions click on the <em>I Agree</em> button.</p>
<figure class="align-default">
<img alt="../../_images/MS4W-agree-license.png" src="../../_images/MS4W-agree-license.png" />
</figure>
<p>The next screen will offer a selection of installation options.  To run a OneGeology service you only need to accept the default options, but you can choose other options if you wish, such as p.mapper (if you want to use PHP//MapScript), or MapBender, OpenLayers, or GeoMoose, if you want to develop your own client application.</p>
<figure class="align-default">
<img alt="../../_images/ms4w-select-options.png" src="../../_images/ms4w-select-options.png" />
</figure>
<p>Once you have made your option selection select <em>Next</em> and choose an installation folder for the MS4W folder.  The default location will be into your <em>C:</em> drive.</p>
<figure class="align-default">
<img alt="../../_images/MS4W-default-path.png" src="../../_images/MS4W-default-path.png" />
</figure>
<p><strong>Note</strong> You shouldn’t specify the MS4W folder as this will be created as part of the installation.</p>
<p>Finally, you need to choose a port to run your web service on.  You should use the default port of 80 if at all possible, otherwise other official web server ports are: 591, 8008, and 8080.</p>
<figure class="align-default">
<img alt="../../_images/MS4W-default-port.png" src="../../_images/MS4W-default-port.png" />
</figure>
<p>When you have finished click <em>Install</em>  the dialogue will show you the progress of the installation process.  If the installer finds that you are missing the appropriate Microsoft Visual C++ distribution to run MapServer, then it will provide an additional window as part of the installation, providing a license agreement which you need to agree to and <em>Install</em>.</p>
<figure class="align-default">
<img alt="../../_images/MS4W-installCpp.png" src="../../_images/MS4W-installCpp.png" />
</figure>
<p>If the installation works correctly you will be taken to a page on your newly installed web server as below:</p>
<figure class="align-default">
<img alt="../../_images/MS4W-localhost-post-install.png" src="../../_images/MS4W-localhost-post-install.png" />
</figure>
<section id="configuring-the-exemplar-services">
<h4>Configuring the exemplar services<a class="headerlink" href="#configuring-the-exemplar-services" title="Permalink to this heading"></a></h4>
<p>Obtain the OneGeology template application in the 20Mbytes approx. sized 1G_WMS-exemplar-data-MS6-update.zip file from the <a class="reference external" href="ftp://ftp.bgs.ac.uk/pubload/OneGeology/">BGS FTP website</a>.</p>
<p>If you are using a web browser clicking on this URL may take you directly to it without requesting a password.  If you prefer to use the older DOS prompt style FTP user interface then as normal with such anonymous ftp services enter anonymous if prompted for a userid and type your email address as the password to allow the FTP manager to monitor who is using the service.</p>
<p>Unzip the OneGeology template application to the same drive and directory level as the MS4W location resulting from the MapServer installation e.g. if you installed MS4W on C:\MS4W then point the unzip extract to C:.  It should create a number of files inside the <em>ms4w</em> directory.  The main part of the two example applications are inside a BGS_Bedrock_and_Superficial_Geology directory (for the shapefile based example) and BGS_Bedrock_Raster_Map directory (for the image file based example) which will be created inside ms4w\apps\cookbookExemplars.</p>
<p>The MapServer executables for the two applications are found in similarly named folders in ms4w\apps\exemplars, and the web server configuration files are found in ms4w\httpd.d</p>
<p>After unzipping the exemplar files, restart your web service.  Now when you browse to localhost/index.html you will get links to the two exemplar services.</p>
</section>
<section id="configuring-your-own-services-using-the-exemplars-as-examples">
<h4>Configuring your own services using the exemplars as examples<a class="headerlink" href="#configuring-your-own-services-using-the-exemplars-as-examples" title="Permalink to this heading"></a></h4>
<section id="c-ms4w-apache-cgi-bin">
<h5>C:\ms4w\Apache\cgi-bin\<a class="headerlink" href="#c-ms4w-apache-cgi-bin" title="Permalink to this heading"></a></h5>
<p>Create a folder inside ms4w\Apache\cgi-bin with a name that follows the OneGeology profile.</p>
<p>It is not within the scope of OneGeology at this stage to address the problem of translating geological terms between different languages so the above service can be in the language you usually use for your data.  However, if you already have your data in other languages, in particular English if that is not your default language, then we would like to encourage you to provide services in these other languages as well.  These should be served from separate services with different URLs.  In MapServer this means making another copy of the above directory and renaming it to use the appropriate language in the directory name.</p>
<p>At this stage you should have a sub-folder structure within c:\ms4w\Apache\cgi-bin like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>\BGS_Bedrock_and_Superficial_Geology
   Holds MapServer cgi libraries for the ‘BGS_Bedrock_and_Superficial_Geology’ shapefile-based exemplar service.
\BGS_Bedrock_Geology
   Holds MapServer cgi libraries for the ‘BGS_Bedrock_Geology’ raster-based exemplar service.
\Your-Organization-code_Your-Service-Theme
   EMPTY
\Your-Organization-code_Your-alternate-language(service)-code_Your-Service-Theme
   EMPTY
</pre></div>
</div>
</section>
<section id="c-ms4w-apps-cookbookexemplars">
<h5>C:\ms4w\apps\cookbookExemplars<a class="headerlink" href="#c-ms4w-apps-cookbookexemplars" title="Permalink to this heading"></a></h5>
<p>Inside the \ms4w\apps\cookbookExemplars folder you will find two folders: “BGS_Bedrock_and_Superficial_Geology” and “BGS_Bedrock_Raster_Map”.  These folders contain the exemplar data, and map configuration files.</p>
<p>We will assume you are basing your service on the BGS_Bedrock_and_Superficial_Geology example; substitute with BGS_Bedrock_Raster_Map if that is closer to your requirements.  When you have decided which exemplar service is most suitable for your needs, you should copy that exemplar folder to a new folder that will be your new service.</p>
<p>Note the names of these folders do not have to match the names of the service, but you would be advised to ensure that the folder name gives some hint as to its contents and purpose.  For example we call one of our exemplar folders “BGS_Bedrock_Raster_Map” to indicate that this service application holds a raster map as datasource, rather than a shapefile.</p>
<p>Make more copies with appropriate names if you are also making multiple language services.</p>
<p>Inside this folder there is a wwwroot\index.html file.  This has some example queries which will enable you to test your service when you have set it up.  For these to work for your new service you will need to edit the file and change all occurrences of the string “BGS_Bedrock_and_Superficial_Geology” with the name you have created for your service.</p>
</section>
<section id="c-ms4w-httpd-d">
<h5>C:\ms4w\httpd.d\<a class="headerlink" href="#c-ms4w-httpd-d" title="Permalink to this heading"></a></h5>
<p>Now you will need to create an httpd conf file in the \ms4w\httpd.d\ folder that has the same name as your service; for example, the “BGS_Bedrock_and_Superficial_Geology” exemplar service has a conf file called “httpd_BGS_Bedrock_and_Superficial_Geology_Exemplar.conf” and the “BGS_Bedrock_Geology” exemplar service has a corresponding conf file called “httpd_BGS_Bedrock_Geology.conf”</p>
<p>You need to copy one of the exemplar .conf files and rename it to match the name of your service, you will then need to change the paths in the file to match your service name and folder configuration.</p>
<p>Using the raster exemplar service (as shown below), you will need to change all references to “BGS_Bedrock_Geology” to match the name of your service, and all references to “BGS_Bedrock_Raster_Map” to match the name of your app folder.  Note, you do not need to add the drive letter.</p>
<div class="highlight-apacheconf notranslate"><div class="highlight"><pre><span></span><span class="nb">Alias</span><span class="w"> </span><span class="sx">/BGS_Bedrock_Geology/</span><span class="w"> </span><span class="s2">&quot;/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/www/&quot;</span><span class="w"></span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/www/&quot;</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>Indexes<span class="w"> </span>FollowSymLinks<span class="w"> </span>Multiviews<span class="w"></span>
<span class="w">    </span><span class="nb">Order</span><span class="w"> </span>allow,deny<span class="w"></span>
<span class="w">    </span><span class="nb">Allow</span><span class="w"> </span>from<span class="w"> </span><span class="k">all</span><span class="w"></span>
<span class="nt">&lt;/Directory&gt;</span><span class="w"></span>

<span class="nb">SetEnvIf</span><span class="w"> </span>Request_URI<span class="w"> </span><span class="s2">&quot;/cgi-bin/exemplars/BGS_Bedrock_Geology/ows&quot;</span><span class="w"> </span>MS_Mapfile=/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/onegeology.map<span class="w"></span>
<span class="nb">SetEnvIf</span><span class="w"> </span>Request_URI<span class="w"> </span><span class="s2">&quot;/fcgi-bin/exemplars/BGS_Bedrock_Geology/ows&quot;</span><span class="w"> </span>MS_Mapfile=/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/onegeology.map<span class="w"></span>
</pre></div>
</div>
</section>
<section id="c-ms4w-apache-htdocs">
<h5>C:\ms4w\Apache\htdocs\<a class="headerlink" href="#c-ms4w-apache-htdocs" title="Permalink to this heading"></a></h5>
<p>Now you should edit the index.html file in the Apache web root \ms4w\Apache\htdocs\ and add a link to your new service.  Note, the link you use is the value of the Alias (line one of the httpd conf file).</p>
<p>Again make more copies if making multiple language services.</p>
</section>
</section>
</section>
<section id="installing-and-configuring-apache-http-web-server">
<h3>Installing and configuring Apache HTTP web server<a class="headerlink" href="#installing-and-configuring-apache-http-web-server" title="Permalink to this heading"></a></h3>
<p>MS4W, as described above, installs both MapServer and the Apache HTTP webserver software.  Other installations of MapServer require configuring of the web server as a separate process.  This section takes you through installing alternate Apache HTTP webserver software, and through the additional configuration you will need to do to create a OneGeology service that follows the same pattern as above.</p>
<section id="bit-apache-http-server">
<h4>64-bit Apache HTTP server<a class="headerlink" href="#bit-apache-http-server" title="Permalink to this heading"></a></h4>
<p>if tyou want to run a 64-bit version of MapServer on Windows such as provided by GISInternals, you will also need to in install a 64-bit version of Apache.</p>
<p>If instead you want to use the latest stable release of Apache-HTTP, that is the version 2.4.n releases (latest is currently 2.4.29), you must instead go to the Apache Lounge site: <a class="reference external" href="http://www.apachelounge.com/download/">http://www.apachelounge.com/download/</a>. There are several options here both in server architecture (32 bit and 64 bit), and server functionality, for you to choose from to fit your needs.</p>
<p>For the purposes of this example we have selected a 64-bit package from Apache Lounge and installed it to our C:\ drive as C:\Apache24\.</p>
<section id="httpd-d-configuration-files">
<h5>httpd.d configuration files<a class="headerlink" href="#httpd-d-configuration-files" title="Permalink to this heading"></a></h5>
<p>For this installation we will now create a httpd.d folder on our D:\ drive, to hold our OneGeology service configuration files, as: D:\WxS\ms\httpd.d\ , and create an http_ file (i.e. ‘httpd_BGS_Bedrock_and_Superficial_Geology_Exemplar.conf’) for our exemplar service as below.</p>
<div class="highlight-apacheconf notranslate"><div class="highlight"><pre><span></span><span class="c">#===============================================================================================#</span><span class="w"></span>
<span class="nb">Alias</span><span class="w"> </span><span class="sx">/BGS_Bedrock_and_Superficial_Geology_Exemplar/</span><span class="w"> </span><span class="s2">&quot;D:/WxS/ms/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/wwwroot/&quot;</span><span class="w"></span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;D:/WxS/ms/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/wwwroot/&quot;</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>FollowSymLinks<span class="w"> </span>Multiviews<span class="w"></span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted<span class="w"></span>
<span class="nt">&lt;/Directory&gt;</span><span class="w"></span>
<span class="c">#===============================================================================================#</span><span class="w"></span>

<span class="nb">SetEnvIf</span><span class="w"> </span>Request_URI<span class="w"> </span><span class="s2">&quot;/cgi-bin/exemplars/BGS_Bedrock_and_Superficial_Geology/wms&quot;</span><span class="w"> </span>MS_Mapfile=D:/WxS/ms/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/onegeology.map<span class="w"></span>
</pre></div>
</div>
<p>Note, that there is a change in the way access permissions are handled between versions 2.2.n and 2.4.n of Apache, so if you are copying the existing MS4W httpd_ conf files you will need to change your &lt;Directory&gt; information;  that is, you will need to replace the ‘<em>Order allow,deny</em>’ and ‘<em>Allow from all</em>’ directives with ‘<em>Require all granted</em>’</p>
</section>
<section id="apache-conf">
<h5>apache.conf<a class="headerlink" href="#apache-conf" title="Permalink to this heading"></a></h5>
<p>Finally you will need to add some information to the Apache-HTTP server configuration file (C:\Apache24\conf\httpd.conf) as per the below snippets.</p>
<div class="highlight-apacheconf notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;IfModule</span><span class="w"> </span><span class="s">alias_module</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">  </span>...<span class="w"></span>
<span class="w">  </span><span class="c"># Alias: Maps web paths into filesystem paths and is used to</span><span class="w"></span>
<span class="w">  </span><span class="c"># access content that does not live under the DocumentRoot.</span><span class="w"></span>

<span class="w">  </span><span class="nb">Alias</span><span class="w"> </span><span class="sx">/ms_tmp</span><span class="w"> </span><span class="s2">&quot;D:/WxS/ms/out/tmp&quot;</span><span class="w"></span>

<span class="w">  </span><span class="c"># ScriptAlias: This controls which directories contain server scripts.</span><span class="w"></span>
<span class="w">  </span><span class="c"># ScriptAliases are essentially the same as Aliases, except that</span><span class="w"></span>
<span class="w">  </span><span class="c"># documents in the target directory are treated as applications and</span><span class="w"></span>
<span class="w">  </span><span class="c"># run by the server when requested rather than as documents sent to the</span><span class="w"></span>
<span class="w">  </span><span class="c"># client.</span><span class="w"></span>

<span class="w">  </span><span class="nb">ScriptAlias</span><span class="w"> </span><span class="sx">/cgi-bin/</span><span class="w"> </span><span class="s2">&quot;C:/Apache24/cgi-bin/&quot;</span><span class="w"></span>
<span class="w">  </span>...<span class="w"></span>
<span class="nt">&lt;/IfModule&gt;</span><span class="w"></span>
...<span class="w"></span>
<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">&quot;C:/Apache24/cgi-bin&quot;</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted<span class="w"></span>
<span class="nt">&lt;/Directory&gt;</span><span class="w"></span>
...<span class="w"></span>
<span class="c"># Parse our MapServer Apache conf files</span><span class="w"></span>
<span class="nb">Include</span><span class="w"> </span>D:/WxS/ms/httpd.d/httpd_*.conf<span class="w"></span>
</pre></div>
</div>
</section>
<section id="create-alias-configuration-files">
<h5>Create alias configuration files<a class="headerlink" href="#create-alias-configuration-files" title="Permalink to this heading"></a></h5>
<p>Next we need to create an alias to our data files and MapServer html templates.  The way you do this varies considerably depending on your Linux version.  In older versions of Ubuntu these aliases are created in the <strong>alias</strong> file located in the <strong>/etc/apache2/conf.d/</strong> directory.  In recent versions you should add these aliases to the <strong>httpd.conf</strong> file in <strong>/etc/apache2/</strong></p>
<p>We need to create information in the style of the contents of the .conf files (found in our unzipped contents ../ms4w/httpd.d/ directory).  We will combine the contents of both .conf files (that deal with the html templates and data content) into our ‘alias’ configuration file.</p>
<p>You may choose any text editor, but probably the easiest to use is nano.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd /etc/apache2</span>
<span class="c1"># nano httpd.conf</span>
</pre></div>
</div>
<div class="highlight-apacheconf notranslate"><div class="highlight"><pre><span></span><span class="nb">Alias</span><span class="w"> </span><span class="sx">/BGS_Bedrock_Geology</span><span class="w"> </span><span class="sx">/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/wwwroot/</span><span class="w"></span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/wwwroot/</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">     </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">     </span><span class="nb">Options</span><span class="w"> </span>Indexes<span class="w"> </span>FollowSymLinks<span class="w"> </span>Multiviews<span class="w"></span>
<span class="w">     </span><span class="nb">Order</span><span class="w"> </span>allow,deny<span class="w"></span>
<span class="w">     </span><span class="nb">Allow</span><span class="w"> </span>from<span class="w"> </span><span class="k">all</span><span class="w"></span>
<span class="nt">&lt;/Directory&gt;</span><span class="w"></span>

<span class="nb">Alias</span><span class="w"> </span><span class="sx">/BGS_Bedrock_and_Superficial_Geology</span><span class="w"> </span><span class="sx">/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/wwwroot/</span><span class="w"></span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/wwwroot/</span><span class="nt">&gt;</span><span class="w"></span>
<span class="w">     </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span><span class="w"></span>
<span class="w">     </span><span class="nb">Options</span><span class="w"> </span>Indexes<span class="w"> </span>FollowSymLinks<span class="w"> </span>Multiviews<span class="w"></span>
<span class="w">     </span><span class="nb">Order</span><span class="w"> </span>allow,deny<span class="w"></span>
<span class="w">     </span><span class="nb">Allow</span><span class="w"> </span>from<span class="w"> </span><span class="k">all</span><span class="w"></span>
<span class="nt">&lt;/Directory&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>^O (to save changes)</p>
<p>ENTER</p>
<p>^X (to exit)</p>
<p>You will probably need to restart the Apache web server at this point:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#/etc/init.d/apache2 restart</span>
</pre></div>
</div>
<p>We can test these using the lynx browser</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#lynx http://127.0.0.1/BGS_Bedrock_and_Superficial_Geology/index.html</span>
</pre></div>
</div>
<p>or using wget:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#cd /tmp</span>
<span class="c1">#wget http://127.0.0.1/BGS_Bedrock_Geology/index.html</span>
<span class="c1">#less index.html</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="installing-gisinternals-packages-for-windows">
<h3>Installing GISInternals packages for Windows<a class="headerlink" href="#installing-gisinternals-packages-for-windows" title="Permalink to this heading"></a></h3>
<p>The most recent versions of the GISInternals GDAL and MapServer packages are available online at: <a class="reference external" href="http://www.gisinternals.com">http://www.gisinternals.com</a></p>
<p>In most instances we would recommend using the MS4W packages to install Apache and MapServer to give yourself a Windows implementation of MapServer, but in some instances, for example if you want the latest version of MapServer or if you want to use 64-bit software, you can alternatively use one of the GISinternals packages for your MapServer service.</p>
<p>In this section we will assume you are familiar with configuring a MS4W service and just provide some notes to assist you configure this alternative MapServer on Windows service using Apache-HTTP as your web server.</p>
<p>Once you have a working web service installed, you now need to obtain the corresponding GISInternals binaries, for example in this case we downloaded the zip file <strong>release-1600-x64-gdal-1-9-2-MapServer-6-2-0.zip</strong>, and unzipped onto our C:\ drive as C:\apps\gisinternals\.</p>
<p>Now we must run the SDKShell.bat batch file to set up some environment variables, for example it adds the following locations to the system PATH:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>C:\apps\gisinternals\bin;
C:\apps\gisinternals\bin\gdal\python\osgeo;
C:\apps\gisinternals\bin\proj\apps;
C:\apps\gisinternals\bin\gdal\apps;
C:\apps\gisinternals\bin\ms\apps;
C:\apps\gisinternals\bin\gdal\csharp;
C:\apps\gisinternals\bin\ms\csharp;
C:\apps\gisinternals\bin\curl;
</pre></div>
</div>
<p>The MapServer executable file (mapserv.exe) is found in the C:\apps\gisinternals\bin\ms\apps folder.  As ever, you can check the version by using the -v option in a command window like:</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">c:\apps\gisinternals\bin\ms\apps&gt;</span>mapserv.exe -v
<span class="go">MapServer version 7.1-dev OUTPUT=PNG OUTPUT=JPEG OUTPUT=KML SUPPORTS=PROJ SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=CAIRO SUPPORTS=SVG_SYMBOLS SUPPORTS=SVGCAIRO SUPPORTS=ICONV SUPPORTS=FRIBIDI SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT SUPPORTS=WFS_SERVER SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER SUPPORTS=SOS_SERVER SUPPORTS=FASTCGI SUPPORTS=THREADS SUPPORTS=GEOS INPUT=JPEG INPUT=POSTGIS INPUT=OGR INPUT=GDAL INPUT=SHAPEFILE</span>
</pre></div>
</div>
<section id="data">
<h4>Data<a class="headerlink" href="#data" title="Permalink to this heading"></a></h4>
<p>You may put your OneGeology data for your service (and the Mapfile etc) anywhere on your server, but here we will follow the same pattern as we have for used for the MS4W services.  In this case we have extracted the exemplar shapefile data to a location on our D:\ drive as:</p>
<ul class="simple">
<li><p>D:\WxS\ms\apps\cookbookExemplars\BGS_Bedrock_and_Superficial_Geology</p>
<ul>
<li><p>data (folder)</p></li>
<li><p>templates (folder)</p></li>
<li><p>wwwroot (folder)</p></li>
<li><p>onegeology.map (file)</p></li>
<li><p>ICSClasses.txt (file)</p></li>
</ul>
</li>
</ul>
<p>You will need to make a few change to the Mapfile from the downloaded exemplar file.  For example you will need to tell MapServer where to find the proj files so that you can reproject your data.  You do this by adding a CONFIG statement at the top of the Mapfile like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">MAP</span>
   <span class="k">CONFIG</span> <span class="s">&quot;PROJ_LIB&quot;</span> <span class="s">&quot;C:/apps/gisinternals/bin/proj/SHARE&quot;</span>
</pre></div>
</div>
<p>You will also need to change the IMAGEPATH statement to point at your chosen temporary file location (within the WEB section of the Mapfile) like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c">#====================================================================#</span>
<span class="c"># Start of WEB interface definition (including WMS enabling metadata)</span>
<span class="c">#====================================================================#</span>
    <span class="k">WEB</span>
        <span class="k">HEADER</span> <span class="s">&quot;tmpl/query_header.html&quot;</span>
        <span class="k">FOOTER</span> <span class="s">&quot;tmpl/query_footer.html&quot;</span>
        <span class="k">IMAGEPATH</span> <span class="s">&quot;D:/WxS/ms/out/tmp/&quot;</span>
        <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
</pre></div>
</div>
</section>
<section id="mapserver-cgi-bin">
<h4>MapServer cgi-bin<a class="headerlink" href="#mapserver-cgi-bin" title="Permalink to this heading"></a></h4>
<p>For this installation we will now create some folders in the Apache-HTTP cgi-bin folder to hold our copy of the mapserv.exe executable (which we will rename as ‘wms’) as:</p>
<ul>
<li><p>C:\Apache24\cgi-bin (folder)</p>
<blockquote>
<div><ul>
<li><p>exemplars (folder)</p>
<blockquote>
<div><ul>
<li><p>BGS_Bedrock_and_Superficial_Geology (folder)</p>
<blockquote>
<div><ul class="simple">
<li><p>wms (file)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>At this stage you will have a working MapServer service such that a request like the below (where we also specify the ‘map’ variable explicitly) will give you a GetCapabilities reponse document.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http://[your-server-name]/cgi-bin/exemplars/BGS_Bedrock_and_Superficial_Geology/wms?
  service=WMS&amp;
  request=GetCapabilities&amp;
  map=D:/WxS/ms/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/onegeology.map&amp;
</pre></div>
</div>
</section>
</section>
<section id="installing-mapserver-on-linux-using-ppas">
<h3>Installing MapServer on Linux using PPAs<a class="headerlink" href="#installing-mapserver-on-linux-using-ppas" title="Permalink to this heading"></a></h3>
<p>This installation guide will give you simple step-by-step instructions of installing MapServer onto a Linux server and assumes you have an Apache HTTP webserver already running.</p>
<p>Users of Ubuntu/Debian systems should find that they are able to get the latest version of MapServer by adding the following Personal Package Archives to their system’s software sources:</p>
<blockquote>
<div><dl class="simple">
<dt>ppa:ubuntugis/ppa</dt><dd><p>Official stable UbuntuGIS packages</p>
</dd>
<dt>ppa:ubuntugis/ubuntugis-unstable</dt><dd><p>Unstable releases of Ubuntu GIS packages</p>
</dd>
</dl>
</div></blockquote>
<p>For example, the Official stable version PPA can be added like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo add-apt-repository ppa:ubuntugis/ppa
sudo apt-get update
</pre></div>
</div>
<p>And the MapServer files need to create a OneGeology service can be added like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt install cgi-mapserver mapserver-bin tinyows
</pre></div>
</div>
<p>The MapServer executable file is called <strong>mapserv</strong> and in our installation is found at //usr//bin//mapserv</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#cp mapserv /usr/lib/cgi-bin/mapserv</span>
</pre></div>
</div>
<p>The mapserv binary created needs to have —rwxr-xr-x permissions to be able to execute</p>
<p>You can check permissions using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#ls —l mapserv</span>
</pre></div>
</div>
<p>If needed you can change permissions using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#chmod 755 mapserv</span>
</pre></div>
</div>
<p>To test you have compiled mapserv with all appropriate options you can check the version:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#./mapserv —v</span>
</pre></div>
</div>
<p>You should get an output like:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>MapServer version 7.0.4 OUTPUT=PNG OUTPUT=JPEG OUTPUT=KML SUPPORTS=PROJ SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=CAIRO SUPPORTS=SVG_SYMBOLS SUPPORTS=RSVG SUPPORTS=ICONV SUPPORTS=FRIBIDI SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT SUPPORTS=WFS_SERVER SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER SUPPORTS=SOS_SERVER SUPPORTS=FASTCGI SUPPORTS=THREADS SUPPORTS=GEOS INPUT=JPEG INPUT=POSTGIS INPUT=OGR INPUT=GDAL INPUT=SHAPEFILE
</pre></div>
</div>
<p>To test you have mapserv accessible through your web server you can use the ‘lynx’ text browser package (available through apt-get):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#apt-get install lynx</span>
<span class="c1">#lynx http://127.0.0.1/cgi-bin/mapserv</span>
</pre></div>
</div>
<p>Or you could simply use the wget program (which will retrieve the output as a text file):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#cd /tmp</span>
<span class="c1">#wget http://127.0.0.1/cgi-bin/mapserv</span>
<span class="c1">#less mapserv</span>
</pre></div>
</div>
<p>You should get the message “No query information to decode. QUERY_STRING is set but empty”</p>
<p>Congratulations! You have now got MapServer installed and configured to run in your web server.</p>
<section id="configuring-mapserver-exemplar-services-on-a-lamp-server">
<h4>Configuring MapServer exemplar services on a LAMP server<a class="headerlink" href="#configuring-mapserver-exemplar-services-on-a-lamp-server" title="Permalink to this heading"></a></h4>
<p>We shall now configure the two BGS exemplar services (a shapefile version and a raster version) available from the BGS FTP server.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#cd /usr/local/src</span>
<span class="c1">#wget ftp://ftp.bgs.ac.uk/pubload/OneGeology/1G_WMS-exemplar-data-MS6-update.zip</span>
<span class="c1">#unzip 1G_WMS-exemplar-data-MS6-update.zip</span>
</pre></div>
</div>
<p>We now need to move the contents of the zip file to the correct locations on our server.</p>
<p>First we move our index pages to the root directory of the web server (/var/www/ on Ubuntu).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#mv ms4w/Apache/htdocs/* /var/www/</span>
</pre></div>
</div>
<section id="create-a-ows-shell-script">
<h5>Create a ows shell script<a class="headerlink" href="#create-a-ows-shell-script" title="Permalink to this heading"></a></h5>
<p>Next we need to create a ‘ows’ shell script for each of our Map Services; which we need to place in an associated directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#cd /usr/lib/cgi-bin</span>
<span class="c1">#mkdir --parents exemplars/BGS_Bedrock_Geology</span>
<span class="c1">#nano exemplars/BGS_Bedrock_Geology/ows</span>
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nv">MS_Mapfile</span><span class="o">=</span>/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_Raster_Map/onegeology.map
<span class="nb">export</span> MS_Mapfile
<span class="nb">exec</span> /usr/lib/cgi-bin/mapserv
<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</div>
<p>^O (to save changes)</p>
<p>ENTER</p>
<p>^X (to exit)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#chmod 755 exemplars/BGS_Bedrock_Geology_Raster/ows</span>
</pre></div>
</div>
<p>and similarly for our shapefile based service</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#mkdir --parents exemplars/BGS_Bedrock_and_Superficial_Geology</span>
<span class="c1">#nano exemplars/BGS_Bedrock_and_Superficial_Geology/ows</span>
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="nv">MS_Mapfile</span><span class="o">=</span>/usr/local/src/ms4w/apps/cookbookExemplars/BGS_Bedrock_and_Superficial_Geology/onegeology.map
<span class="nb">export</span> MS_Mapfile
<span class="nb">exec</span> /usr/lib/cgi-bin/mapserv
<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</div>
<p>^O (to save changes)</p>
<p>ENTER</p>
<p>^X (to exit)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1">#chmod 755 exemplars/BGS_Bedrock_and_Superficial_Geology/ows</span>
</pre></div>
</div>
</section>
<section id="modify-paths-in-the-mapfile">
<h5>Modify paths in the Mapfile<a class="headerlink" href="#modify-paths-in-the-mapfile" title="Permalink to this heading"></a></h5>
<p>The final step is to modify the WEB &gt; IMAGEPATH path (to “/var/tmp/”) and the WEB &gt; IMAGEURL path (to “/tmp/”) in each of our onegeology.map files</p>
<p>That’s it!</p>
</section>
</section>
</section>
<section id="alternative-mapserver-configurations">
<h3>Alternative MapServer configurations<a class="headerlink" href="#alternative-mapserver-configurations" title="Permalink to this heading"></a></h3>
<p>If you want to use other permutations and get stuck remember you can ask the OneGeology Helpdesk any MapServer configuration issues in relation to your OneGeology services, and we will endeavour to help you.</p>
<p>As well as the OneGeology Helpdesk there are a number of other resources to help guide you in your installation, including:</p>
<dl>
<dt>MS4W documentation</dt><dd><p><a class="reference external" href="https://ms4w.com/documentation.html">https://ms4w.com/documentation.html</a></p>
</dd>
<dt>MapServer documentation</dt><dd><p><a class="reference external" href="http://mapserver.org/documentation.html">http://mapserver.org/documentation.html</a></p>
</dd>
<dt>GIS StackExchange (MapServer questions)</dt><dd><p><a class="reference external" href="https://gis.stackexchange.com/search?q=is%3Aquestion+%5BMapServer%5D">https://gis.stackexchange.com/search?q=is%3Aquestion+%5BMapServer%5D</a></p>
</dd>
<dt>GIS StackExchange (MS4W questions)</dt><dd><p><a class="reference external" href="https://gis.stackexchange.com/search?q=is%3Aquestion+%5Bms4w%5D">https://gis.stackexchange.com/search?q=is%3Aquestion+%5Bms4w%5D</a></p>
</dd>
<dt>StackOverflow (Apache web server questions)</dt><dd><p><a class="reference external" href="https://stackoverflow.com/search?q=is%3Aquestion+%5Bapache%5D">https://stackoverflow.com/search?q=is%3Aquestion+%5Bapache%5D</a></p>
</dd>
<dt>Mailing Lists</dt><dd><p><a class="reference external" href="http://mapserver.org/community/lists.html#mapserver-users">http://mapserver.org/community/lists.html#mapserver-users</a></p>
<p><a class="reference external" href="https://lists.ms4w.com/mailman/listinfo/ms4w-users">https://lists.ms4w.com/mailman/listinfo/ms4w-users</a></p>
</dd>
</dl>
<section id="mapserver-and-iis">
<h4>MapServer and IIS<a class="headerlink" href="#mapserver-and-iis" title="Permalink to this heading"></a></h4>
<p>You may use the IIS web server instead of Apache to run the MapServer CGI.  See the previous cookbook for details of how to do this with IIS version 6.  We haven’t been able to update the cookbook for the latest version of IIS, but the MapServer documentation (<a class="reference external" href="http://mapserver.org/installation/iis.html">IIS Setup for MapServer</a>) gives a good guide for how to do this in general for IIS 7 and up.</p>
</section>
<section id="compiling-mapserver-on-linux">
<h4>Compiling MapServer on Linux<a class="headerlink" href="#compiling-mapserver-on-linux" title="Permalink to this heading"></a></h4>
<p>You may wish to compile your own version of MapServer on a *nix operating system of your own choosing.  We haven’t done this for a while and the guidance in our previous cookbook was very out of date.  There is guidance on the MapServer site that takes you through the process (<a class="reference external" href="http://mapserver.org/installation/unix.html">Compiling on Unix</a>)</p>
</section>
</section>
</section>
<section id="general-configuration">
<h2>General configuration<a class="headerlink" href="#general-configuration" title="Permalink to this heading"></a></h2>
<p>MapServer services are configured through the use of Mapfile templates (*.map).  You can use a single Mapfile to configure a service, or you can use a master file that includes other files.  The benefits of using multiple files include ease of maintenance across multiple similar services, and readability.  Here we will use multiple files to show how the various parts of a MapServer (OGC) service need to be configured.  You can configure multiple service types through a single configuration, if desired.</p>
<p>The start of a Mapfile begins with a <strong>MAP</strong> statement and ends with an <strong>END</strong> statement</p>
<p>Comments are shown by lines beginning with a <strong>#</strong> sign</p>
<p>The order of statements in the Mapfile doesn’t matter, here we tend to group alphabetically for readability.</p>
<p>For further details on Mapfile configuration options available see <a class="reference external" href="http://mapserver.org/mapfile/map.html">http://mapserver.org/mapfile/map.html</a></p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">MAP</span>
    <span class="c"># You must supply a NAME for your service, which in OGC services will be the Root Layer Name</span>
    <span class="k">NAME</span> <span class="s">&quot;BGS_EN_Bedrock_and_Superficial_Geology&quot;</span>

    <span class="c"># You may supply some extra configuration details using one or more CONFIG statements</span>
    <span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;D:/logs/MapServer/Pub/TFL/ms_error.log&quot;</span>
    <span class="k">CONFIG</span> <span class="s">&quot;PROJ_LIB&quot;</span> <span class="s">&quot;C:/apps/gisinternals/bin/proj/SHARE&quot;</span>
    <span class="k">CONFIG</span> <span class="s">&quot;PGEO_DRIVER_TEMPLATE&quot;</span> <span class="s">&quot;DRIVER=Microsoft Access Driver (*.mdb, *.accdb);DBQ=</span><span class="si">%s</span><span class="s">&quot;</span>
    <span class="k">CONFIG</span> <span class="s">&quot;OGR_SKIP&quot;</span> <span class="s">&quot;ODBC&quot;</span>

    <span class="c"># You may configure the level of DEBUG detail you want from your service</span>
    <span class="k">DEBUG</span> <span class="mi">0</span>

    <span class="c"># You must supply an EXTENT, which defines the extent of the map to be created</span>
    <span class="c"># The EXTENT is specified in min-x, min-y, max-x, max-y order</span>
    <span class="c"># The EXTENT is specified in units of the default service projection</span>
    <span class="k">EXTENT</span> <span class="p">-</span><span class="mf">8.6476</span> <span class="mf">49.8639</span> <span class="mf">1.76943</span> <span class="mf">60.8622</span>

    <span class="c"># You may specify a set of fonts for your service</span>
    <span class="c"># The location of any included file is relative to the location of Mapfile</span>
    <span class="c"># See below section on alternate character set support</span>
    <span class="k">FONTSET</span> <span class="s">&quot;../DefaultMapIncludes/fontset.lst&quot;</span>

    <span class="c"># You may supply information on the output formats you wish to support</span>
    <span class="c"># See http://mapserver.org/mapfile/outputformat.html#outputformat</span>
    <span class="k">INCLUDE</span> <span class="s">&quot;../DefaultMapIncludes/BGS-service-std-output-plus1.map&quot;</span>

    <span class="c"># You must provide information on the styling of the legend</span>
    <span class="k">LEGEND</span>
        <span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
        <span class="k">STATUS</span> <span class="nb">ON</span>
        <span class="k">KEYSIZE</span> <span class="mi">18</span> <span class="mi">12</span>
        <span class="k">LABEL</span>
            <span class="k">TYPE</span> <span class="nb">BITMAP</span>
            <span class="k">SIZE</span> <span class="nb">MEDIUM</span>
            <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">89</span>
        <span class="k">END</span>
    <span class="k">END</span>

    <span class="c"># You may specify the Maximum Size of the map image</span>
    <span class="k">MAXSIZE</span> <span class="mi">3072</span>

    <span class="c"># You must supply the default PROJECTION for the service</span>
    <span class="c"># For OneGeology services this would normally be EPSG:4326</span>
    <span class="k">PROJECTION</span>
       <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>

    <span class="c"># You may specify the path to the folder holding your shapefile data</span>
    <span class="c"># The path is relative to the location of the mapfile</span>
    <span class="k">SHAPEPATH</span> <span class="s">&quot;data&quot;</span>

    <span class="c"># You must specify the default SIZE of the map image</span>
    <span class="c"># SIZE is specified in Pixels</span>
    <span class="k">SIZE</span> <span class="mi">600</span> <span class="mi">800</span>

    <span class="c"># You must state whether the map is active or not.</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>

    <span class="c"># You can specify the location of a Symbol set that defines symbols used in your styles</span>
    <span class="k">SYMBOLSET</span> <span class="s">&quot;../DefaultMapIncludes/symbols.sym&quot;</span>

    <span class="c"># You must specify the UNITS of the map coordinates</span>
    <span class="k">UNITS</span> <span class="nb">dd</span>

    <span class="k">WEB</span>
        <span class="c">#==================================================================================#</span>
        <span class="c"># The WEB section includes all the general configuration for the WEB service</span>
        <span class="c">#==================================================================================#</span>

        <span class="c"># See below section on the WEB object</span>
    <span class="k">END</span>

    <span class="c"># LAYER specific configuration would follow</span>
    <span class="k">INCLUDE</span> <span class="s">&quot;BedrockLithology.map&quot;</span>
    <span class="p">...</span>

<span class="k">END</span>
</pre></div>
</div>
<p>The <strong>WEB</strong> section of the Mapfile (extract shown below) sets general information for your web service including a general description, contact information, etc.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">WEB</span>
    <span class="c"># The FOOTER template is applied after everything else is sent for a query result</span>
    <span class="k">FOOTER</span> <span class="s">&quot;templates/query_footer.html&quot;</span>
    <span class="c"># The HEADER template is applied before anything else is sent for a query result</span>
    <span class="k">HEADER</span> <span class="s">&quot;templates/query_header.html&quot;</span>

    <span class="c"># IMAGEPATH is the temporary directory for writing temporary files and images</span>
    <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
    <span class="c"># IMAGEURL Base URL for IMAGEPATH</span>
    <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>

    <span class="k">METADATA</span>
        <span class="c">#==================================================================================#</span>
        <span class="c"># The METADATA section is used to populate information into the Web Service metadata response</span>
        <span class="c"># The METADATA detailed here is part of the information found in a GetCapabilities response</span>
        <span class="c">#==================================================================================#</span>
        <span class="c"># OWS_ metadata applies to all available services (WMS, WFS, WCS, SOS...)</span>
        <span class="c"># WCS_ metadata applies to WCS services only. Values will override an OWS setting</span>
        <span class="c"># WFS_ metadata applies to WFS services only. Values will override an OWS setting</span>
        <span class="c"># WMS_ metadata applies to WMS services only. Values will override an OWS setting</span>
        <span class="c">#==================================================================================#</span>

        <span class="c"># See below section on the WEB &gt; METADATA object</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>In any <strong>METADATA</strong> section instead of  the “WMS_” prefix  you may use “OWS_” prefix.  The “OWS_” prefix is used by WMS, WFS, WCS, GML, and other services, so you only have to specify that metadata type once.  If you have “OWS_ABSTRACT” and “WMS_ABSTRACT”, the “OWS_ABSTRACT” will be used by any WFS / WCS service whilst the “WMS_ABSTRACT” will be used by the WMS.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">METADATA</span>
    <span class="s">&quot;OWS_ABSTRACT&quot;</span> <span class="s">&quot;The 1:625k DiGMap data covering the whole of the United Kingdom is available in this OGC web service for all uses - including commercial use subject to the conditions in the Access Constraints section and is being served as a contribution to the OneGeology initiative (www.onegeology.org).&quot;</span>
    <span class="s">&quot;OWS_ACCESSCONSTRAINTS&quot;</span> <span class="s">&quot;The 1:625k DiGMap data is available for free download for your personal, teaching, research, or non-commercial use (as described on http://www.bgs.ac.uk/about/copyright/non_commercial_use.html). Your use of any information provided by the British Geological Survey (BGS) is at your own risk. Neither BGS nor the Natural Environment Research Council (NERC) gives any warranty, condition, or representation as to the quality, accuracy, or completeness of the information or its suitability for any use or purpose. All implied conditions relating to the quality or suitability of the information, and all liabilities arising from the supply of the information (including any liability arising in negligence) are excluded to the fullest extent permitted by law.&quot;</span>
    <span class="s">&quot;OWS_ADDRESS&quot;</span> <span class="s">&quot;Environmental Science Centre&quot;</span>
    <span class="s">&quot;OWS_ADDRESSTYPE&quot;</span> <span class="s">&quot;postal&quot;</span>
    <span class="s">&quot;OWS_CITY&quot;</span> <span class="s">&quot;Keyworth&quot;</span>
    <span class="s">&quot;OWS_CONTACTELECTRONICMAILADDRESS&quot;</span> <span class="s">&quot;enquiries@bgs.ac.uk&quot;</span>
    <span class="s">&quot;OWS_CONTACTFACSIMILETELEPHONE&quot;</span> <span class="s">&quot;+44 (0)115 936 3200&quot;</span>
    <span class="s">&quot;OWS_CONTACTINSTRUCTIONS&quot;</span> <span class="s">&quot;&quot;</span>
    <span class="s">&quot;OWS_CONTACTORGANIZATION&quot;</span> <span class="s">&quot;British Geological Survey&quot;</span>
    <span class="s">&quot;OWS_CONTACTPERSON&quot;</span> <span class="s">&quot;Garry Baker&quot;</span>
    <span class="s">&quot;OWS_CONTACTPOSITION&quot;</span> <span class="s">&quot;&quot;</span>
    <span class="s">&quot;OWS_CONTACTVOICETELEPHONE&quot;</span> <span class="s">&quot;+44 (0)115 936 3100&quot;</span>
    <span class="s">&quot;OWS_COUNTRY&quot;</span> <span class="s">&quot;United Kingdom&quot;</span>

    <span class="c"># The following statement enables all WMS, WFS, WCS operations on all layers in the service</span>
    <span class="c"># The statemant can be overridden by service specific statements, either here or in the LAYERS</span>
    <span class="s">&quot;OWS_ENABLE_REQUEST&quot;</span> <span class="s">&quot;*&quot;</span>

    <span class="s">&quot;OWS_FEES&quot;</span> <span class="s">&quot;none&quot;</span>
    <span class="s">&quot;OWS_HOURSOFSERVICE&quot;</span> <span class="s">&quot;Mon-Fri, 09:00-17:00&quot;</span>
    <span class="c">#===========================================================================#</span>
    <span class="c"># OWS_KEYWORDLIST</span>
    <span class="c"># Put your organisation name and any other information you want to include.</span>
    <span class="c"># You MUST include &quot;OneGeology&quot; as one of the keywords.</span>
    <span class="c"># Do NOT use spaces after the commas in the keyword listing.</span>
    <span class="c">#===========================================================================#</span>
    <span class="s">&quot;OWS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,geology,map,United Kingdom,bedrock,superficial,lithology,lithostratigraphy,age,MD_LANG@ENG,MD_DATE@2011-06-15&quot;</span>

    <span class="c">#&quot;OWS_ONLINERESOURCE&quot; &quot;http://another-service/or/some-different-path/ows?&quot;</span>
    <span class="s">&quot;OWS_POSTCODE&quot;</span> <span class="s">&quot;NG12 5GG&quot;</span>
    <span class="s">&quot;OWS_ROLE&quot;</span> <span class="s">&quot;PointOfContact&quot;</span>
    <span class="s">&quot;OWS_SERVICE_ONLINERESOURCE&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/products/digitalmaps/digmapgb.html&quot;</span>
    <span class="s">&quot;OWS_SLD_ENABLED&quot;</span> <span class="s">&quot;TRUE&quot;</span>
    <span class="s">&quot;OWS_STATEORPROVINCE&quot;</span> <span class="s">&quot;Nottinghamshire&quot;</span>
    <span class="c">#===========================================================================#</span>
    <span class="c"># &quot;OWS_SRS&quot; For WCS/WFS you need to list the default projection _FIRST_</span>
    <span class="c">#===========================================================================#</span>
    <span class="s">&quot;OWS_SRS&quot;</span> <span class="s">&quot;EPSG:27700 EPSG:3857 EPSG:4258 EPSG:4326&quot;</span>

    <span class="s">&quot;OWS_TITLE&quot;</span> <span class="s">&quot;BGS Bedrock and Superficial geology&quot;</span>
    <span class="s">&quot;OWS_UPDATESEQUENCE&quot;</span> <span class="s">&quot;2017-02-09T14:00:00Z&quot;</span>

    <span class="s">&quot;WFS_ABSTRACT&quot;</span> <span class="s">&quot;The 1:625k DiGMap data covering the whole of the United Kingdom is available in this OGC WFS service for your personal, non-commercial use only and is being served as a contribution to the OneGeology initiative(www.onegeology.org).  </span><span class="se">\</span>
<span class="s">    The contents of this WFS service are not intended for direct use but are transformed by a mediator layer into separate WFS services which provide data in GeoSciML. This process is described in Chapter 2 of the OneGeology WFS Cookbook available at www.onegeology.org.&quot;</span>
    <span class="s">&quot;WMS_ABSTRACT&quot;</span> <span class="s">&quot;The 1:625k DiGMap data covering the whole of the United Kingdom is available in this OGC WMS service for your personal, non-commercial use only and is being served as a contribution to the OneGeology initiative (www.onegeology.org).</span><span class="se">\</span>
<span class="s">    Separate bedrock geology and superficial deposits layers are available in this service. Layers available for bedrock are lithostratigraphy, age, and lithology. Layers available for superficial deposits layer are lithostratigraphy and lithology. </span><span class="se">\</span>
<span class="s">    For information about more of the British Geological Survey’s maps that are available digitally please visit http://www.bgs.ac.uk/products/digitalmaps/digmapgb.html&quot;</span>

    <span class="c"># INSPIRE WMS must provide a bounding box for all supported projections</span>
    <span class="s">&quot;WMS_BBOX_EXTENDED&quot;</span> <span class="s">&quot;TRUE&quot;</span>

    <span class="c"># You can specify which output formats you want per operation</span>
    <span class="s">&quot;WMS_FEATURE_INFO_MIME_TYPE&quot;</span> <span class="s">&quot;text/html&quot;</span>
    <span class="s">&quot;WMS_GETMAP_FORMATLIST&quot;</span> <span class="s">&quot;image/png,image/jpeg&quot;</span>

    <span class="s">&quot;WMS_KEYWORDLIST_GEMET_ITEMS&quot;</span> <span class="s">&quot;Bathymetry&quot;</span>
    <span class="s">&quot;WMS_KEYWORDLIST_ISO_ITEMS&quot;</span> <span class="s">&quot;infoMapAccessService&quot;</span>
    <span class="s">&quot;WMS_KEYWORDLIST_VOCABULARY&quot;</span> <span class="s">&quot;GEMET,ISO&quot;</span>

    <span class="c">#&quot;WMS_ONLINERESOURCE&quot; &quot;http://another-service/or/some-different-path/wms?&quot;</span>
    <span class="s">&quot;WMS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:3857 EPSG:27700 EPSG:4258&quot;</span>
    <span class="s">&quot;WMS_ROOTLAYER_TITLE&quot;</span> <span class="s">&quot;BGS Bedrock and Superficial Geology&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>You may use the “WMS_ONLINERESOURCE” (and “OWS_ONLINERESOURCE” etc) metadata sections to change the service endpoint for your service.  For example, you can do this to force users (clients) to always use the IP version of your service rather than the server name (or vice versa), or to force them to always use the cgi-bin version rather than the fcgi-bin version (or vice versa), or to get them to use a different server.  That is, you can have an initial GetCapabilities response document that itself advertises a different service endpoint for the subsequent GetMap requests.  There are several reasons why you might want to do this; one such reason is when you have an existing service that has multiple layers only some of some of which are conformant to OneGeology and in which the service metadata doesn’t otherwise conform to the OneGeology WMS profile.  In such an example, you can set up a service that has a GetCapabilities document that is conformant to the OneGeology WMS profile and which advertises only some of the layers of the other service through the use of the “WMS_ONLINERESOURCE” metadata.</p>
<p>The SRS specifies the coordinate system (spatial reference system) that the WMS can serve data in.  These are commonly specified using EPSG codes <strong>and must include</strong> <a class="reference external" href="http://epsg.io/4326">EPSG:4326</a> so that all services have at least one coordinate system in common.  We would like if you could specify the Spherical Mercator projection (<a class="reference external" href="http://epsg.io/3857">EPSG:3857</a>) to allow your service to be used in Google Maps.  You may specify other systems that are appropriate for your region if you wish; for example we would expect most European services to support either (or both of) <a class="reference external" href="http://epsg.io/4258">EPSG:4258</a> and <a class="reference external" href="http://epsg.io/3034">EPSG:3034</a> to ensure compliance with INSPIRE coordinate system requirements.</p>
<section id="adding-alternate-character-set-support">
<h3>Adding alternate character set support<a class="headerlink" href="#adding-alternate-character-set-support" title="Permalink to this heading"></a></h3>
<p>If you are serving a non-English language service, you may need or want to change the font and character sets.</p>
<p>To specify a font set you need to use the FONTSET keyword which references a file that contains the mappings from the font name aliases, which you will use in your Mapfile, to the actual font file names on your computer. See the MAP section above for an example of referencing a fontset file (fontset.lst)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>arial C:\Windows\Fonts\Arial.ttf
arialuni C:\Windows\Fonts\ARIALUNI.TTF
esricaves2 C:\Windows\Fonts\esri_376.ttf
fradm C:\Windows\Fonts\FRADM.TTF
khmer C:\Windows\Fonts\KhmerUI.ttf
msgothic C:\Windows\Fonts\MSGOTHIC.TTC
msmincho C:\Windows\Fonts\MSMINCHO.TTC
opensym C:\Windows\Fonts\opens___.ttf
sc C:\Windows\Fonts\DejaVuSansCondensed.ttf
scb C:\Windows\Fonts\DejaVuSansCondensed-Bold.ttf
sym C:\Windows\Fonts\symbol.ttf
verdana C:\Windows\Fonts\verdana.ttf
</pre></div>
</div>
<p>You only need one font specified in your Mapfile but you may list as many as you like in your fontset file.</p>
<p>The below example shows how you could modify the LABEL section of the LEGEND, to allow you to display Chinese characters.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LEGEND</span>
    <span class="k">OUTLINECOLOR</span> <span class="mi">200</span> <span class="mi">200</span> <span class="mi">200</span>
    <span class="k">KEYSPACING</span> <span class="mi">10</span> <span class="mi">10</span>
    <span class="k">LABEL</span>
        <span class="k">TYPE</span> <span class="nb">truetype</span>
        <span class="k">FONT</span> <span class="s">&quot;msgothic&quot;</span>
        <span class="k">SIZE</span> <span class="mi">8</span>
        <span class="k">ENCODING</span> <span class="s">&quot;UTF-8&quot;</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The important parts to note in the above example are:</p>
<ul class="simple">
<li><p>TYPE truetype (the default is TYPE bitmap)</p></li>
<li><p>FONT “msgothic” (the font alias we set up in our fontset.lst file)</p></li>
<li><p>SIZE 8 (size should be specified in points, you can’t use words like “small” or “medium” which you do with bitmap fonts.)</p></li>
<li><p>ENCODING “UTF-8” (You must also save your Mapfile in this character set encoding).</p></li>
</ul>
</section>
<section id="creating-your-own-symbology">
<h3>Creating your own symbology<a class="headerlink" href="#creating-your-own-symbology" title="Permalink to this heading"></a></h3>
<p>symbols.sym, is a set of defined symbols that can be used to style your map layers.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">SYMBOLSET</span>
    <span class="k">SYMBOL</span>
        <span class="k">NAME</span> <span class="s">&quot;circle&quot;</span>
        <span class="k">TYPE</span> <span class="nb">ellipse</span>
        <span class="k">FILLED</span> <span class="nb">false</span>
        <span class="k">POINTS</span>
          <span class="mi">1</span> <span class="mi">1</span>
        <span class="k">END</span>
        <span class="k">ANCHORPOINT</span> <span class="mf">0.5</span> <span class="mf">0.5</span>
    <span class="k">END</span>
    <span class="k">SYMBOL</span>
        <span class="k">NAME</span> <span class="s">&quot;circlef&quot;</span>
        <span class="k">TYPE</span> <span class="nb">ellipse</span>
        <span class="k">FILLED</span> <span class="nb">true</span>
        <span class="k">POINTS</span>
          <span class="mi">10</span> <span class="mi">10</span>
        <span class="k">END</span>
        <span class="k">ANCHORPOINT</span> <span class="mf">0.5</span> <span class="mf">0.5</span>
    <span class="k">END</span>
    <span class="k">SYMBOL</span>
        <span class="k">NAME</span> <span class="s">&quot;divides&quot;</span>
        <span class="k">TYPE</span> <span class="nb">TRUETYPE</span>
        <span class="k">FONT</span> <span class="s">&quot;opensym&quot;</span>
        <span class="k">CHARACTER</span> <span class="s">&#39;&amp;#8739;&#39;</span>
        <span class="k">FILLED</span> <span class="nb">true</span>
        <span class="k">ANTIALIAS</span> <span class="nb">true</span>
    <span class="k">END</span>
    <span class="k">SYMBOL</span>
        <span class="k">NAME</span> <span class="s">&quot;v-line&quot;</span>
        <span class="k">TYPE</span> <span class="nb">vector</span>
        <span class="k">FILLED</span> <span class="nb">false</span>
        <span class="k">POINTS</span>
          <span class="mi">0</span>  <span class="mi">0</span>
          <span class="mi">5</span>  <span class="mi">10</span>
          <span class="mi">10</span> <span class="mi">0</span>
        <span class="k">END</span>
    <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="example-include-files">
<h3>Example include files<a class="headerlink" href="#example-include-files" title="Permalink to this heading"></a></h3>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># BGS-Attribution.map</span>
<span class="c"># May be included at SERVICE and/or LAYER metadata level</span>
<span class="s">&quot;WMS_ATTRIBUTION_LOGOURL_FORMAT&quot;</span> <span class="s">&quot;image/gif&quot;</span>
<span class="s">&quot;WMS_ATTRIBUTION_LOGOURL_HREF&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk/img/bgs_c_t_275x60.gif&quot;</span>
<span class="s">&quot;WMS_ATTRIBUTION_LOGOURL_HEIGHT&quot;</span> <span class="s">&quot;60&quot;</span>
<span class="s">&quot;WMS_ATTRIBUTION_LOGOURL_WIDTH&quot;</span> <span class="s">&quot;275&quot;</span>
<span class="s">&quot;WMS_ATTRIBUTION_ONLINERESOURCE&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/&quot;</span>
<span class="s">&quot;WMS_ATTRIBUTION_TITLE&quot;</span> <span class="s">&quot;British Geological Survey (BGS)&quot;</span>

<span class="s">&quot;WMS_AUTHORITYURL_NAME&quot;</span> <span class="s">&quot;BritishGeologicalSurvey&quot;</span>
<span class="s">&quot;WMS_AUTHORITYURL_HREF&quot;</span> <span class="s">&quot;http://data.bgs.ac.uk/ref/BritishGeologicalSurvey&quot;</span>
</pre></div>
</div>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># BGS-service-std-output-plus1.map</span>
<span class="c"># Included at the map level to extend or modify the output formats available to the service</span>
<span class="c"># For example we can use this to enable GeoJSON and zipped shapefie as formats for WFS</span>
<span class="c">#IMAGECOLOR: Background color for the map canvas</span>
<span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
<span class="k">IMAGETYPE</span> <span class="nb">png</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="nb">png</span>
    <span class="k">DRIVER</span> <span class="s">&quot;AGG/PNG&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;image/png&quot;</span>
    <span class="k">IMAGEMODE</span> <span class="nb">RGBA</span>
    <span class="k">EXTENSION</span> <span class="s">&quot;png&quot;</span>
    <span class="k">TRANSPARENT</span> <span class="nb">ON</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;INTERLACE=ON,TRANSPARENT=ON&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;SHAPEZIP&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/ESRI Shapefile&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;application/shapefile&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=zip&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=shape.zip&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;SPATIALITEZIP&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/SQLITE&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;application/spatialite&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;DSCO:SPATIALITE=YES&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=zip&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.db&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;MIDMIF&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/MapInfo File&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=multipart&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;DSCO:FORMAT=MIF&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.mif&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;MultiMIDMIF&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/MapInfo File&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=multipart&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;DSCO:FORMAT=MIF&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;CSV&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/CSV&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;text/csv&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;LCO:GEOMETRY=AS_WKT&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=filesystem&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=simple&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.csv&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;CSVSTREAM&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/CSV&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;text/csv; streamed&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;LCO:GEOMETRY=AS_WKT&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=stream&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=simple&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.csv&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;OGRGML&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/GML&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;text/xml; subtype=gml/2.1.2; driver=ogr&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=memory&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=multipart&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FILENAME=result.gml&quot;</span>
<span class="k">END</span>
<span class="k">OUTPUTFORMAT</span>
    <span class="k">NAME</span> <span class="s">&quot;GeoJSON&quot;</span>
    <span class="k">DRIVER</span> <span class="s">&quot;OGR/GEOJSON&quot;</span>
    <span class="k">MIMETYPE</span> <span class="s">&quot;application/json; subtype=geojson&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;STORAGE=stream&quot;</span>
    <span class="k">FORMATOPTION</span> <span class="s">&quot;FORM=SIMPLE&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="debugging-common-errors">
<h3>Debugging common errors<a class="headerlink" href="#debugging-common-errors" title="Permalink to this heading"></a></h3>
<p>This section is added to help you debug common errors in your Mapfile.</p>
<section id="symbol-definition-error">
<h4>Symbol definition error<a class="headerlink" href="#symbol-definition-error" title="Permalink to this heading"></a></h4>
<p>getString(): Symbol definition error.  Parsing error near (<em>matching text</em>):(line <em>line-number</em>)</p>
<p>This error may occur when your layer classes have a name which includes an apostrophe or other quotation mark that matches the quotation marks used to delimit the CLASS name.  For example if your class name is delimited using single quotes such as below and your class name includes a word with a single quote (d’Irma), you will get this error.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">NAME</span> <span class="s">&#39;Formation d&#39;</span><span class="err">Irma</span> <span class="err">:</span> <span class="err">calcaire</span><span class="p">,</span> <span class="err">dolomie</span> <span class="err">à</span> <span class="err">tromatolites</span><span class="p">,</span> <span class="err">argilite</span><span class="s">&#39;</span>
</pre></div>
</div>
<p>You can correct the error by swapping the file name delimiters to double quotes (as below), in the CLASS name causing the problem; you don’t need to change all the delimiters in all the CLASS names in the Mapfile, just the one(s) with the problem.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">NAME</span> <span class="s">&quot;Formation d&#39;Irma : calcaire, dolomie à stromatolites, argilite&quot;</span>
</pre></div>
</div>
</section>
<section id="unknown-identifier">
<h4>Unknown identifier<a class="headerlink" href="#unknown-identifier" title="Permalink to this heading"></a></h4>
<p>loadLayer(): Unknown identifier. Parsing error near (<em>matching text</em>):(line <em>line-number</em>)</p>
<p>This error can occur when you are missing an enclosing KEYWORD in the Mapfile.  For example in the below example, the CLASS keyword has been commented out, leaving the STYLE section uncommented; STYLE is now found in an unexpected position in the Mapfile, resulting in an error.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c">#CLASS</span>
    <span class="k">STYLE</span>
        <span class="k">COLOR</span> <span class="mi">161</span> <span class="mi">8</span> <span class="mi">0</span>
        <span class="k">MINSIZE</span> <span class="mi">1</span>
        <span class="k">MAXSIZE</span> <span class="mi">10</span>
    <span class="k">END</span> <span class="c">#style</span>
<span class="c">#END #class</span>
</pre></div>
</div>
</section>
<section id="missing-magic-string">
<h4>Missing magic string<a class="headerlink" href="#missing-magic-string" title="Permalink to this heading"></a></h4>
<p>When running a GetFeatureInfo request with the info_format set as text/html, you will get an error like the below, if you do not include a magic string in each of your HTML template documents.</p>
<p>Content-type: text/xml isValidTemplate(): Web application error. Missing magic string, <em>template-file</em> doesn’t look like a MapServer template.</p>
<p>You need to add <strong>&lt;!– MapServer Template –&gt;</strong> to the top of ALL templates.</p>
<p>Example the exemplar template query_footer.html is:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The recently updated exemplar service kits include this NEW requirement, but those updating from older services might miss this.</p>
<p><a class="reference external" href="http://mapserver.org/development/rfc/ms-rfc-56.html">More information on this and related issues.</a></p>
</section>
</section>
<section id="connecting-to-a-database">
<h3>Connecting to a database<a class="headerlink" href="#connecting-to-a-database" title="Permalink to this heading"></a></h3>
<p>If your data is stored in a database you can access it by setting the CONNECTION and CONNECTIONTYPE directives (to specify the connection) and the DATA directive (to specify the data you want to retrieve or query). These directives are put in the LAYER section of your map file.</p>
<p>The below example shows a typical connection to a PostgreSQL/PostGIS database.  Such a connection might be shared across several layers in your service.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTION</span> <span class="s">&quot;user=&#39;your_user_name&#39; password=&#39;your_password&#39; dbname=&#39;m4eu&#39; host=&#39;localhost&#39; port=&#39;5432&#39;&quot;</span>
<span class="k">CONNECTIONTYPE</span> <span class="nb">postgis</span>
</pre></div>
</div>
<p>The below two examples show the types of query that you might want to do to provide your layer.  The first example is a query to retrieve some data from a table based on an attribute value.  The second example is a more straight forward query that you might use when you want to retrieve all the data from a table.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;shape FROM (SELECT * FROM commodityresourceview_vw WHERE commodity IN (&#39;copper&#39;,&#39;lead&#39;,&#39;tin&#39;,&#39;zinc&#39;)) AS base_metal USING UNIQUE identifier USING srid=4258&quot;</span>
</pre></div>
</div>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">DATA</span> <span class="s">&quot;geom FROM public.metallic_min&quot;</span>
</pre></div>
</div>
<p>If your MapServer software has been compiled to include Oracle Spatial then you can connect and query the database like in the below example.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTION</span> <span class="s">&quot;your_user_name/your_password@your_server_ip:1521/your_database_name&quot;</span>
<span class="k">CONNECTIONTYPE</span> <span class="nb">oraclespatial</span>

<span class="k">DATA</span> <span class="s">&quot;ITEM_SHAPE_WGS84 FROM PUBLISHED.QL_ACD_ITEM_PLY_WEB_UG USING UNIQUE ITEM_INDEX_ID SRID 4326&quot;</span>
</pre></div>
</div>
<p>If you have your data in a file geodatabase, then similarly you could connect like below. Note you may also need to set the CONFIG “PGEO_DRIVER_TEMPLATE” and CONFIG “OGR_SKIP”  directives in the MAP section of the map file, as shown in the General map configuration section.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">CONNECTION</span> <span class="s">&quot;data2/OGE.mdb&quot;</span>
<span class="k">CONNECTIONTYPE</span> <span class="nb">ogr</span>

<span class="k">DATA</span> <span class="s">&quot;V5_625k_ONEGEOLOGY_FAULTS_AT_SURFACE&quot;</span>
</pre></div>
</div>
<p>For more details on connecting to a database see the <a class="reference external" href="https://mapserver.org/input/index.html">MapServer Data Input pages</a></p>
</section>
</section>
<section id="wms">
<h2>WMS<a class="headerlink" href="#wms" title="Permalink to this heading"></a></h2>
<p>We provide two exemplar MapServer services, the first is based on a simple raster file, and is used to illustrate a basic WMS, the second uses a vector datasource (shapefiles) to illustrate how to configure a more advanced WMS (and may also be used for a Simple Feature WFS).</p>
<section id="raster-image-data-exemplar-layer-configuration">
<h3>Raster image data exemplar (LAYER configuration)<a class="headerlink" href="#raster-image-data-exemplar-layer-configuration" title="Permalink to this heading"></a></h3>
<p>An example of adding a PNG layer is included in the BGS_Bedrock_Raster_Map application.  The LAYER section is reproduced below for reference.  This data was simply created as a raster from the bedrock shapefile for the purposes of serving as an example.  In this case we won’t be setting up a response to GetFeatureInfo request; we are just returning a coloured map.  There is more <a class="reference external" href="http://www.mapserver.org/input/raster.html">detailed documentation</a> , in particular as regards efficient serving of large images, using 8-bit vs. 24-bit images, tiling etc.</p>
<p>Example extract from Mapfile below:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;BGS_625k_BAR&quot;</span>
    <span class="k">DATA</span> <span class="s">&quot;bedrock625ll.png&quot;</span>
    <span class="k">DUMP</span> <span class="nb">TRUE</span>

    <span class="k">METADATA</span>
        <span class="s">&quot;WMS_ABSTRACT&quot;</span> <span class="s">&quot;GBR BGS 1:625k Bedrock Age&quot;</span>

        <span class="s">&quot;WMS_DATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
        <span class="s">&quot;WMS_DATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/discoverymetadata/13480426.html&quot;</span>

        <span class="s">&quot;WMS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,bedrock,chronostratigraphy,continent@Europe,subcontinent@Northern Europe,geographicarea@United Kingdom,DS_DATE@2011-06-15,age,dataprovider@British Geological Survey,DS_TOPIC@geoscientificInformation,geology,serviceprovider@British Geological Survey&quot;</span>

        <span class="s">&quot;WMS_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;application/vnd.iso.19139+xml&quot;</span>
        <span class="s">&quot;WMS_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://.../geonetwork/srv/en/csw?SERVICE=CSW&amp;VERSION=2.0.2&amp;REQUEST=GetRecordById&amp;ID=ac9f8250-3ae5-49e5-9818-d14264a4fda4&amp;&quot;</span>
        <span class="s">&quot;WMS_METADATAURL_TYPE&quot;</span> <span class="s">&quot;TC211&quot;</span>

        <span class="s">&quot;WMS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:3857 EPSG:27700 EPSG:4258&quot;</span>

        <span class="s">&quot;WMS_STYLE&quot;</span> <span class="s">&quot;default&quot;</span>
        <span class="s">&quot;WMS_STYLE_DEFAULT_LEGENDURL_HEIGHT&quot;</span> <span class="s">&quot;353&quot;</span>
        <span class="s">&quot;WMS_STYLE_DEFAULT_LEGENDURL_WIDTH&quot;</span> <span class="s">&quot;253&quot;</span>
        <span class="s">&quot;WMS_STYLE_DEFAULT_LEGENDURL_FORMAT&quot;</span> <span class="s">&quot;image/png&quot;</span>
        <span class="c"># The legendURL must be accessible externally, so do not use ‘localhost’ or ‘127.0.0.1’</span>
        <span class="s">&quot;WMS_STYLE_DEFAULT_LEGENDURL_HREF&quot;</span> <span class="s">&quot;http://.../BGS_Bedrock_Geology/bedrockAgeLegend.png&quot;</span>

        <span class="s">&quot;WMS_TITLE&quot;</span> <span class="s">&quot;GBR BGS 1:625k Bedrock Age&quot;</span>
    <span class="k">END</span>

    <span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=DEFER&quot;</span>

    <span class="k">PROJECTION</span>
        <span class="s">&quot;init=EPSG:4326&quot;</span>
    <span class="k">END</span>

    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">TOLERANCE</span> <span class="mi">10</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
<section id="vector-data-exemplar-layer-configuration">
<h3>Vector data exemplar (LAYER configuration)<a class="headerlink" href="#vector-data-exemplar-layer-configuration" title="Permalink to this heading"></a></h3>
<p>The example file includes the following shapefile based layers:</p>
<ul class="simple">
<li><p>UK bedrock geology classified by lithology, lithostratigraphy, and age</p></li>
<li><p>UK superficial geology classified by lithology and lithostratigraphy.</p></li>
</ul>
<p>These are typical of the sorts of layer expected for OneGeology but you may have slightly different theme layers and slightly different available classification schemes.  Please consult with the OneGeology helpdesk if you are uncertain about exactly what layers and classifications to serve.</p>
<p>The fields you will need to edit for each <strong>LAYER</strong> section are described below.  The NAME must be unique for each layer.  This is a identifier used by WMS clients to select layers rather than being for human consumption.  It is recommended that the NAME does not contain spaces, special characters, or begin with a number (which could cause problems through interfaces such as OGC services. The OneGeology catalogue service requires that the NAMEs are unique within all the OneGeology layers we have decided some naming conventions as shown in the example.  These are described explicitly in the <a class="reference internal" href="../onegeology_profile.html#service-provision-onegeology-profile"><span class="std std-ref">OneGeology Profile</span></a>.</p>
<p>DATA should specify the name of your shapefile.  The HEADER, TEMPLATE, and FOOTER values refer to files with snippets of HTML template which format the results of GetFeatureInfo requests when requested in text/html format.  The examples have been written for the data fields in the example shapefiles; it should be straightforward for you to edit them to match the fields in your shapefiles.  The PROJECTION section should specify the coordinate system that your data is actually in.  This might not be EPSG:4326 if you have your data in some regional projected system.  However, as most OneGeology clients will want to retrieve your data in the EPSG:4326 system we suggest it will be better for performance reasons to convert your data files to EPSG:4326 rather than have MapServer convert them on-the-fly in response to requests.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
     <span class="k">NAME</span> <span class="s">&quot;GBR_BGS_625k_BLT&quot;</span> <span class="c">#Bedrock lithology</span>
     <span class="k">TYPE</span> <span class="nb">POLYGON</span>
     <span class="k">STATUS</span> <span class="nb">ON</span>
     <span class="k">DATA</span> <span class="s">&quot;bedrock625ll&quot;</span>
     <span class="k">TRANSPARENCY</span> <span class="mi">100</span>
     <span class="k">TOLERANCE</span> <span class="mi">0</span>
     <span class="k">TOLERANCEUNITS</span> <span class="nb">pixels</span>
     <span class="k">TRANSFORM</span> <span class="nb">TRUE</span>
     <span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=DEFER&quot;</span>
     <span class="k">HEADER</span> <span class="s">&quot;tmpl/bedrock_lithology_query_header.html&quot;</span>
     <span class="k">TEMPLATE</span> <span class="s">&quot;tmpl/bedrock_lithology_query_body.html&quot;</span>
     <span class="k">FOOTER</span> <span class="s">&quot;tmpl/bedrock_lithology_query_footer.html&quot;</span>
     <span class="k">PROJECTION</span>
         <span class="s">&quot;init=epsg:4326&quot;</span>
     <span class="k">END</span>
</pre></div>
</div>
<p>In the METADATA section you should edit the following values:</p>
<dl class="simple">
<dt>WMS_TITLE</dt><dd><p>the human readable layer name and should follow the conventions in the OneGeology Profile</p>
</dd>
<dt>WMS_ABSTRACT</dt><dd><p>expands on the title with any extra information you feel would be useful.</p>
</dd>
<dt>WMS_SRS</dt><dd><p>These values specify which coordinate systems your WMS can supply the data in and <strong>MUST</strong> include at least <strong>EPSG:4326</strong>. Other coordinate systems are up to you; for example you may wish to include the EPSG:3857 (spherical mercator) coordinate system, which is used by several web mapping clients such as Bing Maps, Google Maps, and Yahoo maps.</p>
</dd>
<dt>GML_INCLUDE_ITEMS and WMS_INCLUDE_ITEMS</dt><dd><p>These items will depend on the data fields in your shapefile and which ones you wish to make available by a GetFeatureInfo request.  Items should be a comma separated list of field names.  These should be the same as the fields included in the HTML templates above. It is optional to include any information here but obviously if you have fields with geological unit names or ages they would be useful to include. The GML prefix applies to the GML response only and the WMS prefix applies to the plain text response only.</p>
</dd>
<dt>WMS_METADATAURL_HREF and WMS_DATAURL_HREF</dt><dd><p>are supposed to contain URLs for web pages which describe the dataset used for the layer in more detail.  It is possible that you may already have suitable web pages on your organization’s website, or you may wish to create suitable pages to be served by this same server.  These URL’s give users of your WMS service quick and easy links back to your web pages that may describe your available data offerings in more detail. The differences between the metadataurl and dataurl are:</p>
</dd>
<dt>WMS_METADATAURL_HREF</dt><dd><p>the metadataurl must only link to a page which describes your layer data  corresponding to either the TC211/ISO:19115:2003 or FGDC-STD-001-1998 metadata standards.  See  <a class="reference internal" href="../onegeology_profile.html#service-provision-onegeology-profile-core-metadata"><span class="std std-ref">Core TC211/ISO:19115 Metadata</span></a> for the core metadata required to be TC211/ISO:19115:2003 compliant</p>
</dd>
<dt>WMS_DATAURL_HREF</dt><dd><p>the dataurl is to be used when you have some layer metadata that doesn’t conform to either of these standards.</p>
</dd>
</dl>
<p>The UK geology layer examples point to some pre-existing web pages on the BGS website which were suitable so that you can get an idea of what you might use for your own data.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">METADATA</span>
    <span class="s">&quot;GML_FEATUREID&quot;</span> <span class="s">&quot;ID&quot;</span>
    <span class="s">&quot;GML_INCLUDE_ITEMS&quot;</span> <span class="s">&quot;RCS_D&quot;</span>

    <span class="s">&quot;OWS_ABSTRACT&quot;</span> <span class="s">&quot;GBR BGS 1:625k scale Bedrock Lithology&quot;</span>
    <span class="s">&quot;OWS_DATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
    <span class="s">&quot;OWS_DATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/discoverymetadata/13480426.html&quot;</span>
    <span class="s">&quot;OWS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,bedrock,lithology,continent@Europe,subcontinent@Northern Europe,geographicarea@United Kingdom,geology,dataprovider@British Geological Survey,DS_TOPIC@geoscientificInformation,serviceprovider@British Geological Survey,DS_DATE@2011-06-15,thematic@Bedrock,thematic@Lithology&quot;</span>
    <span class="s">&quot;OWS_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://.../geonetwork/srv/en/csw?SERVICE=CSW&amp;VERSION=2.0.2&amp;REQUEST=GetRecordById&amp;ID=9df8df52-d788-37a8-e044-0003ba9b0d98&amp;&quot;</span>
    <span class="s">&quot;OWS_METADATAURL_TYPE&quot;</span> <span class="s">&quot;TC211&quot;</span>
    <span class="s">&quot;OWS_TITLE&quot;</span> <span class="s">&quot;GBR BGS 1:625k Bedrock Lithology&quot;</span>

    <span class="s">&quot;WFS_ENCODING&quot;</span> <span class="s">&quot;UTF-8&quot;</span>
    <span class="s">&quot;WFS_GETFEATURE_FORMATLIST&quot;</span> <span class="s">&quot;csv,csvstream,ogrgml,shapezip,midmif,multimidmif,geojson&quot;</span>
    <span class="s">&quot;WFS_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;text/xml&quot;</span>
    <span class="s">&quot;WFS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:27700 EPSG:3034 EPSG:3857 EPSG:4258&quot;</span>

    <span class="s">&quot;WMS_FEATURE_INFO_MIME_TYPE&quot;</span> <span class="s">&quot;text/html,application/vnd.ogc.gml,text/plain&quot;</span>
    <span class="s">&quot;WMS_GETMAP_FORMATLIST&quot;</span> <span class="s">&quot;image/png,image/jpeg,image/tiff,application/x-pdf,image/svg+xml&quot;</span>
    <span class="s">&quot;WMS_INCLUDE_ITEMS&quot;</span> <span class="s">&quot;RCS_D&quot;</span>
    <span class="s">&quot;WMS_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;application/xml; charset=UTF-8&quot;</span>
    <span class="s">&quot;WMS_SRS&quot;</span> <span class="s">&quot;CRS:84 EPSG:27700 EPSG:3034 EPSG:3413 EPSG:3857 EPSG:4258 EPSG:4326&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>The CLASS related items are the most complicated.  These sections are setting up the legend and colour scheme of your map polygons, lines and points. You will need a separate item for each rock type or lithology you have in your data.  This will depend on your data and which field in your shapefile (or other datasource) you are going to use for colouring the map.  The example below specifies that the RCS_D field will be used for specifying which colour to use with the CLASSITEM VALUE.  Then for each CLASS section the EXPRESSION specifies the value of RCS_D this colour will apply to and the COLOR and BACKGROUNDCOLOR give the respective RGB colour values.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span> <span class="k">CLASSITEM</span> <span class="s">&#39;RCS_D&#39;</span>
 <span class="k">CLASS</span>
     <span class="k">NAME</span> <span class="s">&#39;ANORTHOSITE&#39;</span>
     <span class="k">EXPRESSION</span> <span class="s">&#39;ANORTHOSITE&#39;</span>
     <span class="c">#RASTERFILL_STYLE_SOLID</span>
     <span class="k">STYLE</span>
         <span class="k">COLOR</span> <span class="mi">237</span> <span class="mi">237</span> <span class="mi">237</span>
         <span class="k">BACKGROUNDCOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
     <span class="k">END</span> <span class="c">#style</span>
 <span class="k">END</span> <span class="c">#class</span>

<span class="c">#...  more classes needed to assign colours</span>

<span class="c"># for each value of RCS_D</span>
</pre></div>
</div>
<p>Colour codes for the lithostratigraphical and lithology layers are specific to the British Geological Survey, you should use the codes used by your geological survey.  However, for OneGeology it has been agreed, where possible, to serve a chronostratigraphic age layer using the new <a class="reference external" href="https://www.seegrid.csiro.au/wiki/pub/CGIModel/GeologicTime/ISChart2009.pdf">IUGS 2009 colour scheme</a> .  This will give some form of harmonization between the different chronostratigraphic layers served by the contributing geological surveys and this is only possible where such an internationally agreed scheme exists.  In this case the British Geological Survey had to refine, re-allocate, and ‘map’ its internal ages to fit the IUGS 2009 one.  The file ‘ICSClasses.txt’ contains a full list of names and CLASS definitions for the appropriate colours for all the IUGS 2009 colours.  In the Mapfile we have commented out the terms that are not actually used in the BGS map; please do the same for your map.</p>
</section>
<section id="configuring-html-query-templates">
<h3>Configuring HTML query templates<a class="headerlink" href="#configuring-html-query-templates" title="Permalink to this heading"></a></h3>
<p>All templates must include the <strong>&lt;!– MapServer Template –&gt;</strong> statement on the first line of the file.</p>
<p>You may include any HTML and even some JavaScript in your templates, all entities must be properly encoded.</p>
<p>The output of attribute values from the datasource or environment variables are denoted by square brackets, so in the below example we are outputting the value of the RCS_D attribute as part of an HTML table in the bedrock lithology layer of our exemplar service.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="cm">&lt;!-- LAYER QUERY BODY --&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>[RCS_D]<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>The following are examples of how we might configure our WMS GetFeatureInfo responses</p>
<section id="debugging-your-requests">
<h4>Debugging your requests<a class="headerlink" href="#debugging-your-requests" title="Permalink to this heading"></a></h4>
<p>In this example we are using MapServer environment variables to help us debug the request that was used to generate the response</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="cm">&lt;!-- ERL footer (start)--&gt;</span>
<span class="cm">&lt;!-- Request URL: --&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Debug<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;gfiref&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>The <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://ogcdev.bgs.ac.uk/cgi-bin/BGS_EN_MINERALS/ows?SERVICE=WMS&amp;amp;VERSION=1.3.0&amp;amp;REQUEST=[REQUEST]&amp;amp;BBOX=[BBOX]&amp;amp;CRS=[CRS]&amp;amp;WIDTH=[WIDTH]&amp;amp;HEIGHT=[HEIGHT]&amp;amp;INFO_FORMAT=text/html&amp;amp;STYLES=&amp;amp;bgcolor=0xFFFFFF&amp;amp;transparent=TRUE&amp;amp;language=eng&amp;amp;FORMAT=image/png&amp;amp;LAYERS=[LAYERS]&amp;amp;QUERY_LAYERS=[QUERY_LAYERS]&amp;amp;I=[I]&amp;amp;J=[J]&amp;amp;&quot;</span><span class="p">&gt;</span>request<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> used to generate this report was:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;</span>
http://ogcdev.bgs.ac.uk/cgi-bin/BGS_EN_MINERALS/ows?
  SERVICE=WMS<span class="ni">&amp;amp;</span>
  VERSION=1.3.0<span class="ni">&amp;amp;</span>
  REQUEST=[REQUEST]<span class="ni">&amp;amp;</span>
  BBOX=[BBOX]<span class="ni">&amp;amp;</span>
  CRS=[CRS]<span class="ni">&amp;amp;</span>
  WIDTH=[WIDTH]<span class="ni">&amp;amp;</span>
  HEIGHT=[HEIGHT]<span class="ni">&amp;amp;</span>
  INFO_FORMAT=text/html<span class="ni">&amp;amp;</span>
  STYLES=<span class="ni">&amp;amp;</span>
  bgcolor=0xFFFFFF<span class="ni">&amp;amp;</span>
  transparent=TRUE<span class="ni">&amp;amp;</span>
  language=eng<span class="ni">&amp;amp;</span>
  FORMAT=image/png<span class="ni">&amp;amp;</span>
  LAYERS=[LAYERS]<span class="ni">&amp;amp;</span>
  QUERY_LAYERS=[QUERY_LAYERS]<span class="ni">&amp;amp;</span>
  I=[I]<span class="ni">&amp;amp;</span>
  J=[J]<span class="ni">&amp;amp;</span>
  <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Data retrieval tests<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>WFS GetFeature for area of GetMap request<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://ogcdev.bgs.ac.uk/cgi-bin/BGS_EN_MINERALS/ows?service=WFS&amp;amp;request=GetFeature&amp;amp;version=2.0.0&amp;amp;typename=erl:CommodityResourceView&amp;amp;CRS=[CRS]&amp;amp;bbox=[BBOX][CRS],&amp;amp;&quot;</span><span class="p">&gt;</span>http://ogcdev.bgs.ac.uk/cgi-bin/BGS_EN_MINERALS/ows?service=WFS<span class="ni">&amp;amp;</span>request=GetFeature<span class="ni">&amp;amp;</span>version=2.0.0<span class="ni">&amp;amp;</span>typename=erl:CommodityResourceView<span class="ni">&amp;amp;</span>CRS=[CRS]<span class="ni">&amp;amp;</span>bbox=[BBOX],[CRS]<span class="ni">&amp;amp;</span><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- ERL footer (end)--&gt;</span>
</pre></div>
</div>
</section>
<section id="handling-fields-for-which-you-have-no-data">
<h4>Handling fields for which you have no data<a class="headerlink" href="#handling-fields-for-which-you-have-no-data" title="Permalink to this heading"></a></h4>
<p>As GeoSciML-Lite requires data (or URIs pointing to null value reasons) for data that was not required in the OneGeology-Europe services, you have a few options with MapServer if you don’t have the required data (for example a specification_uri for all features). Option 1 would be to create a column in the data source and populate the rows with null value URIs (such as for example with the value <a class="reference external" href="http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown/">http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown/</a>). Option 2 would be to populate the missing values within the GetFetaureInfo request template, such as below:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!-- MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>identifier<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[OBJECTID]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>name<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[Name]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>faultType_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[faultType_uri]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>positionalAccuracy (m)<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[PositionalAccuracy]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>movementType_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Here we provide an INSPIRE nil reason for the missing movementType_uri --&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>deformationStyle_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Here we provide an INSPIRE nil reason for the missing deformationStyle_uri --&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>representativeOlderAge_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[representativeOlderAge_uri]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>representativeYoungerAge_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[representativeYoungerAge_uri]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>representativeAge_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>[representativeAge_uri]<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>specification_uri<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Here we supply a link to our Feature (using our Simple Fetaure GeoSciML-Lite WFS).</span>
<span class="cm">    This information isn&#39;t in the database and we can update to a full GeoSciML response when available</span>
<span class="cm">    In the actual template we have this as a link --&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/BGS_OGE_Bedrock_and_Surface_Geology_in3/ows?service=WFS<span class="ni">&amp;amp;</span>
    request=GetFeature<span class="ni">&amp;amp;</span>version=1.1.0<span class="ni">&amp;amp;</span>FeatureID=GBR_BGS_EN_1M_Surface_Fault.[OBJECTID]<span class="ni">&amp;amp;</span><span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Here we supply a link to some metadata for our datasource that isn&#39;t in the database</span>
<span class="cm">    In the actual template we have this as a link --&gt;</span>
    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>http://metadata.bgs.ac.uk/geonetwork/srv/en/iso19139.xml?id=6075<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="using-javascript">
<h4>Using JavaScript<a class="headerlink" href="#using-javascript" title="Permalink to this heading"></a></h4>
<p>Here we embed some JavaScript into a response to give a TimeSeries schart for the data point selected</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cm">&lt;!--MapServer Template --&gt;</span>
<span class="p">&lt;</span><span class="nt">table</span> <span class="na">summary</span><span class="o">=</span><span class="s">&quot;Query response for Terrafirma 1:5k ground motion WMS layer&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;hasTS&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">th</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;&lt;</span><span class="nt">b</span><span class="p">&gt;</span>Terrafirma 1:5000 ground motion report<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tfoot</span><span class="p">&gt;&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Time series data for selected point&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="p">[</span><span class="nx">Id</span><span class="p">]</span><span class="nx">_tsline</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;1992-05-11&#39;</span><span class="p">,[</span><span class="nx">D19920511</span><span class="p">]],[</span><span class="s1">&#39;1993-02-15&#39;</span><span class="p">,[</span><span class="nx">D19930215</span><span class="p">]],[</span><span class="s1">&#39;1993-03-22&#39;</span><span class="p">,[</span><span class="nx">D19930322</span><span class="p">]],[</span><span class="s1">&#39;1993-05-31&#39;</span><span class="p">,[</span><span class="nx">D19930531</span><span class="p">]],[</span><span class="s1">&#39;1993-08-09&#39;</span><span class="p">,[</span><span class="nx">D19930809</span><span class="p">]],[</span><span class="s1">&#39;1993-10-18&#39;</span><span class="p">,[</span><span class="nx">D19931018</span><span class="p">]],[</span><span class="s1">&#39;1993-11-22&#39;</span><span class="p">,[</span><span class="nx">D19931122</span><span class="p">]],[</span><span class="s1">&#39;1995-04-19&#39;</span><span class="p">,[</span><span class="nx">D19950419</span><span class="p">]],[</span><span class="s1">&#39;1995-05-24&#39;</span><span class="p">,[</span><span class="nx">D19950524</span><span class="p">]],[</span><span class="s1">&#39;1995-05-25&#39;</span><span class="p">,[</span><span class="nx">D19950525</span><span class="p">]],[</span><span class="s1">&#39;1995-06-28&#39;</span><span class="p">,[</span><span class="nx">D19950628</span><span class="p">]],[</span><span class="s1">&#39;1995-06-29&#39;</span><span class="p">,[</span><span class="nx">D19950629</span><span class="p">]],[</span><span class="s1">&#39;1995-08-02&#39;</span><span class="p">,[</span><span class="nx">D19950802</span><span class="p">]],[</span><span class="s1">&#39;1995-08-03&#39;</span><span class="p">,[</span><span class="nx">D19950803</span><span class="p">]],[</span><span class="s1">&#39;1995-09-06&#39;</span><span class="p">,[</span><span class="nx">D19950906</span><span class="p">]],[</span><span class="s1">&#39;1995-10-11&#39;</span><span class="p">,[</span><span class="nx">D19951011</span><span class="p">]],[</span><span class="s1">&#39;1995-10-12&#39;</span><span class="p">,[</span><span class="nx">D19951012</span><span class="p">]],[</span><span class="s1">&#39;1995-12-21&#39;</span><span class="p">,[</span><span class="nx">D19951221</span><span class="p">]],[</span><span class="s1">&#39;1996-02-28&#39;</span><span class="p">,[</span><span class="nx">D19960228</span><span class="p">]],[</span><span class="s1">&#39;1996-02-29&#39;</span><span class="p">,[</span><span class="nx">D19960229</span><span class="p">]],[</span><span class="s1">&#39;1996-04-03&#39;</span><span class="p">,[</span><span class="nx">D19960403</span><span class="p">]],[</span><span class="s1">&#39;1996-04-04&#39;</span><span class="p">,[</span><span class="nx">D19960404</span><span class="p">]],[</span><span class="s1">&#39;1996-05-08&#39;</span><span class="p">,[</span><span class="nx">D19960508</span><span class="p">]],[</span><span class="s1">&#39;1996-05-09&#39;</span><span class="p">,[</span><span class="nx">D19960509</span><span class="p">]],[</span><span class="s1">&#39;1996-06-12&#39;</span><span class="p">,[</span><span class="nx">D19960612</span><span class="p">]],[</span><span class="s1">&#39;1996-07-17&#39;</span><span class="p">,[</span><span class="nx">D19960717</span><span class="p">]],[</span><span class="s1">&#39;1996-08-22&#39;</span><span class="p">,[</span><span class="nx">D19960822</span><span class="p">]],[</span><span class="s1">&#39;1996-10-31&#39;</span><span class="p">,[</span><span class="nx">D19961031</span><span class="p">]],[</span><span class="s1">&#39;1996-12-05&#39;</span><span class="p">,[</span><span class="nx">D19961205</span><span class="p">]],[</span><span class="s1">&#39;1997-01-09&#39;</span><span class="p">,[</span><span class="nx">D19970109</span><span class="p">]],[</span><span class="s1">&#39;1997-02-13&#39;</span><span class="p">,[</span><span class="nx">D19970213</span><span class="p">]],[</span><span class="s1">&#39;1997-03-20&#39;</span><span class="p">,[</span><span class="nx">D19970320</span><span class="p">]],[</span><span class="s1">&#39;1997-04-24&#39;</span><span class="p">,[</span><span class="nx">D19970424</span><span class="p">]],[</span><span class="s1">&#39;1997-05-29&#39;</span><span class="p">,[</span><span class="nx">D19970529</span><span class="p">]],[</span><span class="s1">&#39;1997-08-07&#39;</span><span class="p">,[</span><span class="nx">D19970807</span><span class="p">]],[</span><span class="s1">&#39;1997-09-11&#39;</span><span class="p">,[</span><span class="nx">D19970911</span><span class="p">]],[</span><span class="s1">&#39;1997-10-16&#39;</span><span class="p">,[</span><span class="nx">D19971016</span><span class="p">]],[</span><span class="s1">&#39;1997-11-20&#39;</span><span class="p">,[</span><span class="nx">D19971120</span><span class="p">]],[</span><span class="s1">&#39;1997-12-25&#39;</span><span class="p">,[</span><span class="nx">D19971225</span><span class="p">]],[</span><span class="s1">&#39;1998-01-29&#39;</span><span class="p">,[</span><span class="nx">D19980129</span><span class="p">]],[</span><span class="s1">&#39;1998-03-05&#39;</span><span class="p">,[</span><span class="nx">D19980305</span><span class="p">]],[</span><span class="s1">&#39;1998-04-09&#39;</span><span class="p">,[</span><span class="nx">D19980409</span><span class="p">]],[</span><span class="s1">&#39;1998-05-14&#39;</span><span class="p">,[</span><span class="nx">D19980514</span><span class="p">]],[</span><span class="s1">&#39;1998-06-18&#39;</span><span class="p">,[</span><span class="nx">D19980618</span><span class="p">]],[</span><span class="s1">&#39;1998-07-23&#39;</span><span class="p">,[</span><span class="nx">D19980723</span><span class="p">]],[</span><span class="s1">&#39;1998-08-27&#39;</span><span class="p">,[</span><span class="nx">D19980827</span><span class="p">]],[</span><span class="s1">&#39;1998-10-01&#39;</span><span class="p">,[</span><span class="nx">D19981001</span><span class="p">]],[</span><span class="s1">&#39;1998-11-05&#39;</span><span class="p">,[</span><span class="nx">D19981105</span><span class="p">]],[</span><span class="s1">&#39;1998-12-10&#39;</span><span class="p">,[</span><span class="nx">D19981210</span><span class="p">]],[</span><span class="s1">&#39;1999-02-18&#39;</span><span class="p">,[</span><span class="nx">D19990218</span><span class="p">]],[</span><span class="s1">&#39;1999-03-25&#39;</span><span class="p">,[</span><span class="nx">D19990325</span><span class="p">]],[</span><span class="s1">&#39;1999-07-08&#39;</span><span class="p">,[</span><span class="nx">D19990708</span><span class="p">]],[</span><span class="s1">&#39;1999-08-11&#39;</span><span class="p">,[</span><span class="nx">D19990811</span><span class="p">]],[</span><span class="s1">&#39;1999-08-12&#39;</span><span class="p">,[</span><span class="nx">D19990812</span><span class="p">]],[</span><span class="s1">&#39;1999-09-15&#39;</span><span class="p">,[</span><span class="nx">D19990915</span><span class="p">]],[</span><span class="s1">&#39;1999-09-16&#39;</span><span class="p">,[</span><span class="nx">D19990916</span><span class="p">]],[</span><span class="s1">&#39;1999-10-20&#39;</span><span class="p">,[</span><span class="nx">D19991020</span><span class="p">]],[</span><span class="s1">&#39;1999-10-21&#39;</span><span class="p">,[</span><span class="nx">D19991021</span><span class="p">]],[</span><span class="s1">&#39;1999-11-25&#39;</span><span class="p">,[</span><span class="nx">D19991125</span><span class="p">]],[</span><span class="s1">&#39;1999-12-30&#39;</span><span class="p">,[</span><span class="nx">D19991230</span><span class="p">]],[</span><span class="s1">&#39;2000-02-02&#39;</span><span class="p">,[</span><span class="nx">D20000202</span><span class="p">]],[</span><span class="s1">&#39;2000-02-03&#39;</span><span class="p">,[</span><span class="nx">D20000203</span><span class="p">]],[</span><span class="s1">&#39;2000-03-09&#39;</span><span class="p">,[</span><span class="nx">D20000309</span><span class="p">]],[</span><span class="s1">&#39;2000-04-13&#39;</span><span class="p">,[</span><span class="nx">D20000413</span><span class="p">]],[</span><span class="s1">&#39;2000-11-09&#39;</span><span class="p">,[</span><span class="nx">D20001109</span><span class="p">]],[</span><span class="s1">&#39;2000-12-14&#39;</span><span class="p">,[</span><span class="nx">D20001214</span><span class="p">]],[</span><span class="s1">&#39;2001-10-25&#39;</span><span class="p">,[</span><span class="nx">D20011025</span><span class="p">]],[</span><span class="s1">&#39;2002-10-10&#39;</span><span class="p">,[</span><span class="nx">D20021010</span><span class="p">]],[</span><span class="s1">&#39;2002-12-19&#39;</span><span class="p">,[</span><span class="nx">D20021219</span><span class="p">]],[</span><span class="s1">&#39;2003-05-08&#39;</span><span class="p">,[</span><span class="nx">D20030508</span><span class="p">]],[</span><span class="s1">&#39;2004-01-08&#39;</span><span class="p">,[</span><span class="nx">D20040108</span><span class="p">]],[</span><span class="s1">&#39;2004-07-01&#39;</span><span class="p">,[</span><span class="nx">D20040701</span><span class="p">]],[</span><span class="s1">&#39;2004-10-14&#39;</span><span class="p">,[</span><span class="nx">D20041014</span><span class="p">]],[</span><span class="s1">&#39;2004-12-23&#39;</span><span class="p">,[</span><span class="nx">D20041223</span><span class="p">]],[</span><span class="s1">&#39;2005-01-27&#39;</span><span class="p">,[</span><span class="nx">D20050127</span><span class="p">]]];</span><span class="w"> </span><span class="c1">//--&gt;</span><span class="w"></span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;&lt;/</span><span class="nt">tfoot</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Point ID: <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>[Id]<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
...
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Azimuth: <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>[Azimuth]<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;[Id]_chart1&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tschart&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Time series chart for selected point&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">th</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Header for time series data&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;gfiTableHeader&quot;</span><span class="p">&gt;</span>Measurements on dates (YYYY-MM-DD) are in mm<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
...
<span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="cm">&lt;!-- D20050127 --&gt;</span>2005-01-27: <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span>[D20050127]<span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span><span class="c">&lt;!--</span><span class="w"></span>
<span class="w">    </span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#[Id]_chart1:hidden&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">plot1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">.</span><span class="nx">jqplot</span><span class="p">(</span><span class="s1">&#39;[Id]_chart1&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[[</span><span class="nx">Id</span><span class="p">]</span><span class="nx">_tsline</span><span class="p">],</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nx">title</span><span class="o">:</span><span class="s1">&#39;Time series plot for selected point&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nx">axes</span><span class="o">:</span><span class="p">{</span><span class="nx">xaxis</span><span class="o">:</span><span class="p">{</span><span class="nx">renderer</span><span class="o">:</span><span class="nx">$</span><span class="p">.</span><span class="nx">jqplot</span><span class="p">.</span><span class="nx">DateAxisRenderer</span><span class="p">}},</span><span class="w"></span>
<span class="w">        </span><span class="nx">series</span><span class="o">:</span><span class="p">[{</span><span class="nx">lineWidth</span><span class="o">:</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="nx">markerOptions</span><span class="o">:</span><span class="p">{</span><span class="nx">style</span><span class="o">:</span><span class="s1">&#39;circle&#39;</span><span class="p">}}]</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"> </span><span class="c1">// --&gt;</span><span class="w"></span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="configuring-group-layering">
<h3>Configuring group layering<a class="headerlink" href="#configuring-group-layering" title="Permalink to this heading"></a></h3>
<p>In some situations, for example when you have too many individual layers, or if you have to comply with some strict naming conventions (such as INSPIRE) you may need to consider configuring group layering.  In group layering you nest one set of layers inside another (group) layer, you can still call (e.g. make a GetMap request on) any of the individual grouped layers or you can call all the grouped layers at the same time using the grouping layer.  For example in the below MapServer GetCapabilities response on a service with group layers you could make a GetMap request on the group layer called GE.GeologicFault and would get a map comprising both the grouped layers (GE.GeologicFault_GBR_BGS_EN_1M_Surface and GE.GeologicFault_GBR_BGS_EN_1M_Bedrock), or you could perform a GetMap request on either of the individual layers.</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../../_images/GroupLayering.jpg"><img alt="Group layering in a GetCapabilities response" src="../../_images/GroupLayering.jpg" style="width: 1032px; height: 350px;" /></a>
<figcaption>
<p><span class="caption-text">Group layering in a GetCapabilities response</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>To configure group layering in MapServer first you need to configure a service with all the layers that need to be grouped.  The next step is to add a <strong>GROUP</strong> keyword (with the name of the group layer) into the LAYER section of all the layers you want to be grouped together. Finally, in ONE of the METADATA sections of the layers you want to group you need to add a <strong>WMS_GROUP_TITLE</strong> and a <strong>WMS_GROUP_ABSTRACT</strong> value.  For example in the MapServer service configuration file for the above GetCapabilities response we have the following configuration:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
<span class="hll">    <span class="k">GROUP</span> <span class="s">&quot;GE.GeologicFault&quot;</span>
</span>    <span class="k">NAME</span> <span class="s">&quot;GE.GeologicFault_GBR_BGS_EN_1M_Surface&quot;</span>
    <span class="k">TYPE</span> <span class="nb">LINE</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">EXTENT</span> <span class="p">-</span><span class="mf">8.01697</span> <span class="mf">49.9678</span> <span class="mf">0.715821</span> <span class="mf">60.8368</span>
    <span class="k">MAXSCALEDENOM</span> <span class="mi">3000000</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">ogr</span>
    <span class="k">CONNECTION</span> <span class="s">&quot;data2/OGE.mdb&quot;</span>
    <span class="k">DATA</span> <span class="s">&quot;V5_625k_ONEGEOLOGY_FAULTS_AT_SURFACE&quot;</span>
    <span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=DEFER&quot;</span>
    <span class="k">OPACITY</span> <span class="mi">100</span>
    <span class="k">TOLERANCE</span> <span class="mi">10</span>
    <span class="k">TOLERANCEUNITS</span> <span class="nb">pixels</span>
    <span class="k">TRANSFORM</span> <span class="nb">TRUE</span>
    <span class="c"># Same template OK for surface and bedrock faults</span>
    <span class="k">HEADER</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_headerGSMLP.html&quot;</span>
    <span class="k">TEMPLATE</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_bodyGSMLP.html&quot;</span>
    <span class="k">FOOTER</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_footerGSMLP.html&quot;</span>
    <span class="k">PROJECTION</span>
        <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>
    <span class="k">METADATA</span>
        <span class="k">INCLUDE</span> <span class="s">&quot;../DefaultMapIncludes/BGS-Attribution.map&quot;</span>
        <span class="s">&quot;OWS_TITLE&quot;</span> <span class="s">&quot;BGS 1:1 Million surface geologic structure&quot;</span>
        <span class="s">&quot;OWS_ABSTRACT&quot;</span> <span class="s">&quot;BGS surface fault geology originally created for OneGeology Europe&quot;</span>
        <span class="s">&quot;OWS_EXTENT&quot;</span> <span class="s">&quot;-8.01697 49.9678 0.715821 60.8368&quot;</span>
        <span class="s">&quot;OWS_SRS&quot;</span> <span class="s">&quot;CRS:84 EPSG:27700 EPSG:3034 EPSG:4258 EPSG:4326&quot;</span>
        <span class="s">&quot;GML_INCLUDE_ITEMS&quot;</span> <span class="s">&quot;all&quot;</span>
        <span class="s">&quot;GML_FEATUREID&quot;</span> <span class="s">&quot;OBJECTID&quot;</span>
        <span class="s">&quot;OWS_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/discoverymetadata/13480426.html&quot;</span>
        <span class="s">&quot;OWS_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
        <span class="s">&quot;OWS_METADATAURL_TYPE&quot;</span> <span class="s">&quot;TC211&quot;</span>
        <span class="s">&quot;OWS_DATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/products/digitalmaps/digmapgb_625.html&quot;</span>
        <span class="s">&quot;OWS_DATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
        <span class="s">&quot;OWS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,continent@Europe,subcontinent@Northern Europe,geographicarea@United Kingdom,serviceprovider@British Geological Survey,dataprovider@British Geological Survey,thematic@Harmonized structure,thematic@Surface geology,DS_TOPIC@geoscientificinformation,DS_DATE@2010,thematic@Structure,thematic@Fault&quot;</span>
        <span class="s">&quot;WFS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:27700 EPSG:3034 EPSG:4258&quot;</span>
        <span class="s">&quot;WMS_GROUP_TITLE&quot;</span> <span class="s">&quot;Geologic Faults&quot;</span>
        <span class="s">&quot;WMS_GROUP_ABSTRACT&quot;</span> <span class="s">&quot;MappedFeature (spatial objects whose specification property is of type ShearDisplacementStructure)&quot;</span>
<span class="hll">    <span class="k">END</span>
</span><span class="hll">    <span class="k">INCLUDE</span> <span class="s">&quot;FaultTypeClassesIn3.map&quot;</span>
</span><span class="k">END</span>
<span class="k">LAYER</span>
    <span class="k">GROUP</span> <span class="s">&quot;GE.GeologicFault&quot;</span>
    <span class="k">NAME</span> <span class="s">&quot;GE.GeologicFault_GBR_BGS_EN_1M_Bedrock&quot;</span>
<span class="hll">
</span>    <span class="k">CONNECTION</span> <span class="s">&quot;data2/OGE.mdb&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">ogr</span>

    <span class="k">DATA</span> <span class="s">&quot;V5_625k_ONEGEOLOGY_FAULTS&quot;</span>
    <span class="k">EXTENT</span> <span class="p">-</span><span class="mf">8.09708</span> <span class="mf">49.9678</span> <span class="mf">0.781767</span> <span class="mf">60.8368</span>

    <span class="k">FOOTER</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_footerGSMLP.html&quot;</span>
    <span class="k">HEADER</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_headerGSMLP.html&quot;</span>
    <span class="k">TEMPLATE</span> <span class="s">&quot;templ/OGE_1M_bedrock_GeologicStructure_bodyGSMLP.html&quot;</span>

    <span class="k">MAXSCALEDENOM</span> <span class="mi">3000000</span>

    <span class="k">METADATA</span>
         <span class="k">INCLUDE</span> <span class="s">&quot;../DefaultMapIncludes/BGS-Attribution.map&quot;</span>
         <span class="s">&quot;GML_INCLUDE_ITEMS&quot;</span> <span class="s">&quot;all&quot;</span>
         <span class="s">&quot;GML_FEATUREID&quot;</span> <span class="s">&quot;OBJECTID&quot;</span>
         <span class="s">&quot;OWS_ABSTRACT&quot;</span> <span class="s">&quot;BGS bedrock fault geology  originally created for OneGeology Europe. </span><span class="se">\</span>
<span class="s">         The bedrock fault layer shows faults with superficial deposits (Quaternary and Recent) removed.&quot;</span>
         <span class="s">&quot;OWS_DATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
         <span class="s">&quot;OWS_DATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/products/digitalmaps/digmapgb_625.html&quot;</span>
         <span class="s">&quot;OWS_EXTENT&quot;</span> <span class="s">&quot;-8.09708 49.9678 0.781767 60.8368&quot;</span>
         <span class="s">&quot;OWS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,continent@Europe,subcontinent@Northern Europe,geographicarea@United Kingdom,serviceprovider@British Geological Survey,dataprovider@British Geological Survey,thematic@Harmonized structure,thematic@Bedrock,DS_TOPIC@geoscientificinformation,DS_DATE@2010,thematic@Structure,thematic@Fault&quot;</span>
         <span class="s">&quot;OWS_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
         <span class="s">&quot;OWS_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://www.bgs.ac.uk/discoverymetadata/13480426.html&quot;</span>
         <span class="s">&quot;OWS_METADATAURL_TYPE&quot;</span> <span class="s">&quot;TC211&quot;</span>
         <span class="s">&quot;OWS_SRS&quot;</span> <span class="s">&quot;CRS:84 EPSG:27700 EPSG:3034 EPSG:4258 EPSG:4326&quot;</span>
         <span class="s">&quot;OWS_TITLE&quot;</span> <span class="s">&quot;BGS 1:1 Million bedrock geologic structure&quot;</span>
         <span class="s">&quot;WFS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:27700 EPSG:3034 EPSG:4258&quot;</span>
    <span class="k">END</span>

    <span class="k">OPACITY</span> <span class="mi">100</span>
    <span class="k">PROCESSING</span> <span class="s">&quot;CLOSE_CONNECTION=DEFER&quot;</span>

    <span class="k">PROJECTION</span>
         <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>

    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">TOLERANCE</span> <span class="mi">10</span>
    <span class="k">TOLERANCEUNITS</span> <span class="nb">pixels</span>
    <span class="k">TRANSFORM</span> <span class="nb">TRUE</span>
    <span class="k">TYPE</span> <span class="nb">LINE</span>

    <span class="k">INCLUDE</span> <span class="s">&quot;FaultTypeClassesIn3.map&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
</section>
</section>
<section id="simple-feature-wfs">
<h2>Simple feature WFS<a class="headerlink" href="#simple-feature-wfs" title="Permalink to this heading"></a></h2>
<p>Whilst MapServer is not able to provide a complex feature WFS (such as is required to supply GeoSciML 4.0)  it is possible to configure it to provide a simple feature WFS.  If you have already set up a WMS with a vector data source it is possible with only minor additions to the SERVER and LAYER configuration to enable a WFS service.  If your data supports it, you can also configure a portrayal service, to provide a GeoSciML-Lite simple feature service for example.</p>
<p>A WFS service will be enabled by the presence of an <strong>OWS_ENABLE_REQUEST</strong> or <strong>WFS_ENABLE_REQUEST</strong> statement in the MAP &gt; WEB &gt; METADATA section, or in the LAYER &gt; METADATA section.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># The following statment enables all operations for all OGC services</span>
<span class="s">&quot;OWS_ENABLE_REQUEST&quot;</span> <span class="s">&quot;*&quot;</span>

<span class="c"># The following statement disables all WFS operations</span>
<span class="s">&quot;WFS_ENABLE_REQUEST&quot;</span> <span class="s">&quot;!*&quot;</span>

<span class="c"># The following statement disables GetCapabilities and DescribeFeatureType operations but allows GetFeature</span>
<span class="c"># If !GetCapabilities is set in a LAYER &gt; METADATA section level, and in the WEB &gt; METADATA section</span>
<span class="c"># WFS GetCapabilities is enabled, the feature type (layer)  won&#39;t appear in the WFS GetCapabilities response.</span>
<span class="s">&quot;WFS_ENABLE_REQUEST&quot;</span> <span class="s">&quot;!GetCapabilities !DescribeFeatureType GetFeature&quot;</span>
</pre></div>
</div>
<p>The MapServer WFS Server pages <a class="reference external" href="http://mapserver.org/ogc/wfs_server.html">http://mapserver.org/ogc/wfs_server.html</a> give full details of the options to configure a WFS service but below we give some hints to get you going with ERML-Lite and GeoSciML-Lite schemas.</p>
<p>In the MAP &gt; WEB &gt; METADATA section you can set the default WFS language, and also configure a namespace prefix and uri like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WFS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>

<span class="c"># For GeoSciML-Lite use:</span>
<span class="s">&quot;WFS_NAMESPACE_PREFIX&quot;</span> <span class="s">&quot;gmlsp&quot;</span>
<span class="s">&quot;WFS_NAMESPACE_URI&quot;</span> <span class="s">&quot;http://xmlns.geosciml.org/geosciml-portrayal/4.0&quot;</span>

<span class="c"># ERML-Lite use:</span>
<span class="s">&quot;WFS_NAMESPACE_PREFIX&quot;</span> <span class="s">&quot;erl&quot;</span>
<span class="s">&quot;WFS_NAMESPACE_URI&quot;</span> <span class="s">&quot;http://xmlns.earthresourceml.org/earthresourceml-lite/1.0&quot;</span>
</pre></div>
</div>
<p>In any LAYER &gt; METADATA section you can define any number of GML constants. You can use this mecahnism as a way to add nil values or other constant information that is missing from your data source but required by the GeoSciML-Lite schema, or simply because you wish to supply it.</p>
<p>In the below example we have used this mechanism to populate specification_uri and metadata_uri which were required with GeoSciML-Portrayal version 2; in the current GeoSciML-Lite 4.0 version these propreties are now optional.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;GML_CONSTANTS&quot;</span> <span class="s">&quot;specification_uri,metadata_uri&quot;</span>
<span class="s">&quot;GML_metadata_uri_TYPE&quot;</span> <span class="s">&quot;string&quot;</span>
<span class="s">&quot;GML_metadata_uri_VALUE&quot;</span> <span class="s">&quot;http://metadata.bgs.ac.uk/geonetwork/srv/en/iso19139.xml?id=6074&quot;</span>
<span class="s">&quot;GML_specification_uri_TYPE&quot;</span> <span class="s">&quot;string&quot;</span>
<span class="s">&quot;GML_specification_uri_VALUE&quot;</span> <span class="s">&quot;http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unpopulated/&quot;</span>
</pre></div>
</div>
<p>Once a constant has been defined for a layer, the constant can be accessed in a template using the standard notation.</p>
<p>In any LAYER &gt; METADATA section you can specify which items in your datasource to include (or exclude) in your Feature response, so in this below example we are saying effectively include everything (GML_INCLUDE_ITEMS) except (GML_EXCLUDE_ITEMS).</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;GML_INCLUDE_ITEMS&quot;</span> <span class="s">&quot;all&quot;</span>
<span class="s">&quot;GML_EXCLUDE_ITEMS&quot;</span> <span class="s">&quot;AgeMax,AgeMin,EventEnvironment,EventProcess,Lithology_1,ProportionTerms_1,GeologicUnitPartRole_1,Lithology_2,ProportionTerms_2,GeologicUnitPartRole_2,Lithology_3,ProportionTerms_3,GeologicUnitPartRole_3,Lithology_4,ProportionTerms_4,GeologicUnitPartRole_4,Lithology_5,ProportionTerms_5,GeologicUnitPartRole_5,MetamorphicGrade,NameIndex,BodyMorphology,SamplingFrame,GUObservationMethod,GUPurpose,SHAPE_Length,SHAPE_Area,RELEASED,gu_id,mf_id&quot;</span>
</pre></div>
</div>
<p>In any LAYER &gt; METADATA section you can specify an alias to be used in your feature response, so for example if your feature identifier is called OBJECTID in your database you can alias it to the required identifier, or if you want to change the case of a field (or property) from Name to name you would use:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;GML_OBJECTID_ALIAS&quot;</span> <span class="s">&quot;identifier&quot;</span>
<span class="s">&quot;GML_Name_ALIAS&quot;</span> <span class="s">&quot;name&quot;</span>
</pre></div>
</div>
<p>You can specify your own grouping of the properties (and the order in which they appear) within a feature and give this grouping a name like below. If you have used any aliases you must reference the original name and not the alias value in the grouping, though the alias will appear in the output.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;GML_GROUPS&quot;</span> <span class="s">&quot;ShearDisplacementStructureView&quot;</span>
<span class="s">&quot;GML_ShearDisplacementStructureView_GROUP&quot;</span> <span class="s">&quot;OBJECTID,Name,faultType,observationMethod,positionalAccuracy,faultType_uri,movementType_uri,deformationStyle_uri,representativeAge_uri,representativeOlderAge_uri,representativeYoungerAge_uri,specification_uri,metadata_uri&quot;</span>
</pre></div>
</div>
<p>By default MapServer outputs the geometry in a field called _msGeometry_ to change the name of the field to a value relevant to your schema you use GML_GEOMETRIES, like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;GML_GEOMETRIES&quot;</span> <span class="s">&quot;shape&quot;</span>
</pre></div>
</div>
</section>
<section id="wcs">
<h2>WCS<a class="headerlink" href="#wcs" title="Permalink to this heading"></a></h2>
<p>In the same way as WMS and WFS are enabled on a service, WCS operations are enabled using either the <strong>OWS_ENABLE_REQUEST</strong> or <strong>WCS_ENABLE_REQUEST”</strong> statement in the MAP &gt; WEB &gt; METADATA section (enabling WCS for all coverages) or in the LAYER &gt; METADATA section for enabling operations on a per coverage (layer) basis.</p>
<p>For example:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># The following statement enables all core WCS operations (GetCapabilities, GetCoverage and DescribeCoverage)</span>
<span class="s">&quot;WCS_ENABLE_REQUEST&quot;</span> <span class="s">&quot;*&quot;</span>
</pre></div>
</div>
<p>In addition to default metadata specified above a OneGeology WCS service should specify the following information in the MAP &gt; WEB &gt; METADATA.</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="c"># You need to provide both an _ABSTRACT and a _DESCRIPTION to cover all WCS versions</span>
<span class="c">#============================================================================================#</span>
<span class="s">&quot;WCS_ABSTRACT&quot;</span> <span class="s">&quot;The European Marine Observation and Data Network (EMODnet) is a long term marine data initiative from the European Commission Directorate-General for Maritime Affairs and Fisheries (DG MARE) underpinning its Marine Knowledge 2020 strategy. EMODnet is a consortium of organisations assembling European marine data, data products and metadata from diverse sources in a uniform way. The main purpose of EMODnet is to unlock fragmented and hidden marine data resources and to make these available to individuals and organisations (public and private), and to facilitate investment in sustainable coastal and offshore activities through improved access to quality-assured, standardised and harmonised marine data which are interoperable and free of restrictions on use.&quot;</span>

<span class="s">&quot;WCS_DESCRIPTION&quot;</span> <span class="s">&quot;The European Marine Observation and Data Network (EMODnet) is a long term marine data initiative from the European Commission Directorate-General for Maritime Affairs and Fisheries (DG MARE) underpinning its Marine Knowledge 2020 strategy. EMODnet is a consortium of organisations assembling European marine data, data products and metadata from diverse sources in a uniform way. The main purpose of EMODnet is to unlock fragmented and hidden marine data resources and to make these available to individuals and organisations (public and private), and to facilitate investment in sustainable coastal and offshore activities through improved access to quality-assured, standardised and harmonised marine data which are interoperable and free of restrictions on use.&quot;</span>

<span class="s">&quot;WCS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,infoCoverageAccessService,Europe,EMODnet,Bathymetry,MD_LANG@ENG,MD_DATE@2015-04-14&quot;</span>

<span class="c">#============================================================================================#</span>
<span class="c"># &quot;WCS_LABEL&quot; Is MANDATORY metadata for WCS version 1.0.0 GetCapabilities in SERVICE and LAYER metadata.</span>
<span class="c"># &quot;WCS_LABEL&quot; should be the same value as the WCS_TITLE (which is used as its replacement in later WCS versions).</span>
<span class="c">#============================================================================================#</span>
<span class="s">&quot;WCS_LABEL&quot;</span> <span class="s">&quot;BGS EMODnet bathymetry&quot;</span>
<span class="s">&quot;WCS_TITLE&quot;</span> <span class="s">&quot;BGS EMODnet bathymetry&quot;</span>

<span class="c"># You need to list the default projection first</span>
<span class="s">&quot;WCS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:3031 EPSG:3034 EPSG:3413 EPSG:3857 EPSG:4258&quot;</span>
</pre></div>
</div>
<p>The following is an example of a coverage LAYER</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;BGS_EMODNET_CentralMed-MCol&quot;</span>
    <span class="k">DATA</span> <span class="s">&quot;Adriatic Sea - Ionian Sea - Central Mediterranean [Multi Colour].tif&quot;</span>

    <span class="k">METADATA</span>
        <span class="k">INCLUDE</span> <span class="s">&quot;../DefaultMapIncludes/BGS-Attribution.map&quot;</span>
        <span class="k">INCLUDE</span> <span class="s">&quot;emodnet-mcol-legend.map&quot;</span>
        <span class="s">&quot;band1_BAND_DESCRIPTION&quot;</span> <span class="s">&quot;Red&quot;</span>
        <span class="s">&quot;band2_BAND_DESCRIPTION&quot;</span> <span class="s">&quot;Green&quot;</span>
        <span class="s">&quot;band3_BAND_DESCRIPTION&quot;</span> <span class="s">&quot;Blue&quot;</span>
        <span class="s">&quot;WCS_BAND_INTERPRETATION&quot;</span> <span class="s">&quot;Colour&quot;</span>
        <span class="s">&quot;WCS_BANDCOUNT&quot;</span> <span class="s">&quot;3&quot;</span>
        <span class="s">&quot;WCS_BAND_NAMES&quot;</span> <span class="s">&quot;band1 band2 band3&quot;</span>
        <span class="s">&quot;WCS_DESCRIPTION&quot;</span> <span class="s">&quot;European Marine Observation and Data Network (EMODnet) bathymetry for the Adriatic Sea - Ionian Sea - Central Mediterranean region. Native data is multi-colour GeoTiff.&quot;</span>
        <span class="s">&quot;WCS_IMAGEMODE&quot;</span> <span class="s">&quot;BYTE&quot;</span>
        <span class="s">&quot;WCS_INTERVAL&quot;</span> <span class="s">&quot;0 255&quot;</span>
        <span class="s">&quot;WCS_LABEL&quot;</span> <span class="s">&quot;Adriatic Sea - Ionian Sea - Central Mediterranean [Multi Colour]&quot;</span>
        <span class="s">&quot;WCS_NATIVE_FORMAT&quot;</span> <span class="s">&quot;image/tiff&quot;</span>
        <span class="s">&quot;WCS_RANGESET_AXES&quot;</span> <span class="s">&quot;bands&quot;</span>
        <span class="s">&quot;WCS_RANGESET_DESCRIPTION&quot;</span> <span class="s">&quot;Depth&quot;</span>
        <span class="c">#===================================================</span>
        <span class="c"># &quot;WCS_RANGESET_LABEL&quot; is mandatory 1.0.0 metadata</span>
        <span class="c">#===================================================</span>
        <span class="s">&quot;WCS_RANGESET_LABEL&quot;</span> <span class="s">&quot;Red/Green/Blue colour interpretations&quot;</span>
        <span class="c">#===================================================</span>
        <span class="c"># &quot;WCS_RANGESET_NAME&quot; is mandatory 1.0.0 metadata</span>
        <span class="c">#===================================================</span>
        <span class="s">&quot;WCS_RANGESET_NAME&quot;</span> <span class="s">&quot;band&quot;</span>
        <span class="s">&quot;WCS_SIGNIFICANT_FIGURES&quot;</span> <span class="s">&quot;3&quot;</span>
        <span class="s">&quot;WCS_SIZE&quot;</span> <span class="s">&quot;2977 3883&quot;</span>
        <span class="s">&quot;OWS_ABSTRACT&quot;</span> <span class="s">&quot;European Marine Observation and Data Network (EMODnet) bathymetry for the Adriatic Sea - Ionian Sea - Central Mediterranean region. Native data is multi-colour GeoTiff.&quot;</span>
        <span class="s">&quot;OWS_KEYWORDLIST&quot;</span> <span class="s">&quot;OneGeology,continent@Europe,dataprovider@EMODnet,serviceprovider@British Geological Survey,DS_TOPIC@geoscientificInformation,DS_DATE@2011-06-30,Bathymetry,CRS_SUPPORTED@EPSG:4326 EPSG:3031 EPSG:3034 EPSG:3413 EPSG:3857 EPSG:4258&quot;</span>
        <span class="s">&quot;OWS_SRS&quot;</span> <span class="s">&quot;EPSG:4326 EPSG:3031 EPSG:3034 EPSG:3413 EPSG:3857 EPSG:4258&quot;</span>
        <span class="s">&quot;OWS_TITLE&quot;</span> <span class="s">&quot;Adriatic Sea - Ionian Sea - Central Mediterranean [Multi Colour]&quot;</span>
    <span class="k">END</span>

    <span class="k">PROJECTION</span>
        <span class="s">&quot;init=epsg:4326&quot;</span>
    <span class="k">END</span>

    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">TOLERANCE</span> <span class="mi">10</span>
    <span class="k">TYPE</span> <span class="nb">RASTER</span>
 <span class="k">END</span>
</pre></div>
</div>
<p>Further details for configuring WCS with Mapserver can be found at: <a class="reference external" href="http://mapserver.org/ogc/wcs_server.html">WCS Server</a></p>
</section>
<section id="inspire-metadata">
<h2>INSPIRE metadata<a class="headerlink" href="#inspire-metadata" title="Permalink to this heading"></a></h2>
<p>INSPIRE specific metadata can either be referenced in an external INSPIRE service metadata document (scenario 1) or can be directly embedded in the capabilities document (scenario 2). MapServer supports both scenarios.  In either scenario an extended capabilities section is added to the GetCapabilities response for the service, using metadata configured in the <strong>SERVICE &gt; WEB &gt; METADATA</strong> section of the Mapfile.</p>
<p>For example to add a scenario 1 INSPIRE extended capabilities section for an INSPIRE View service (WMS) you would use something like the below:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WMS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
<span class="s">&quot;WMS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;URL&quot;</span>
<span class="s">&quot;WMS_INSPIRE_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;application/xml&quot;</span>
<span class="s">&quot;WMS_INSPIRE_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://metadata.bgs.ac.uk/geonetwork/srv/en/csw?SERVICE=CSW&amp;REQUEST=GetRecordById&amp;ID=7822e848-822d-45a5-8584-56d352fd2170&amp;elementSetName=full&amp;OutputSchema=csw:IsoRecord&amp;&quot;</span>
</pre></div>
</div>
<p>Which would create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inspire_vs:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataUrl</span> <span class="na">xsi:type=</span><span class="s">&quot;inspire_common:resourceLocatorType&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;inspire_common:URL&gt;</span>http://metadata.bgs.ac.uk/geonetwork/srv/en/csw?SERVICE=CSW
        <span class="ni">&amp;amp;</span>REQUEST=GetRecordById<span class="ni">&amp;amp;</span>ID=7822e848-822d-45a5-8584-56d352fd2170<span class="ni">&amp;amp;</span>elementSetName=full<span class="ni">&amp;amp;</span>OutputSchema=csw:IsoRecord<span class="ni">&amp;amp;</span>
        <span class="nt">&lt;/inspire_common:URL&gt;</span>
        <span class="nt">&lt;inspire_common:MediaType&gt;</span>application/xml<span class="nt">&lt;/inspire_common:MediaType&gt;</span>
    <span class="nt">&lt;/inspire_common:MetadataUrl&gt;</span>
    <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
        <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
            <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
        <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
    <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
    <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
        <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
    <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
<span class="nt">&lt;/inspire_vs:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p>And similarly for a WFS (INSPIRE download service) you would use something like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WFS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;url&quot;</span>
<span class="s">&quot;WFS_INSPIRE_DSID_CODE&quot;</span> <span class="s">&quot;c8a4207f-adb8-43fc-ad70-8ae1f7d4b50d&quot;</span>
<span class="s">&quot;WFS_INSPIRE_DSID_NS&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk&quot;</span>
<span class="s">&quot;WFS_INSPIRE_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;application/xml&quot;</span>
<span class="s">&quot;WFS_INSPIRE_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk/terrafirma/metadata/TerraFirmaSRVMD.xml&quot;</span>
<span class="s">&quot;WFS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
</pre></div>
</div>
<p>To create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ows:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_dls:ExtendedCapabilities&gt;</span>
        <span class="nt">&lt;inspire_common:MetadataUrl</span> <span class="na">xsi:type=</span><span class="s">&quot;inspire_common:resourceLocatorType&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;inspire_common:URL&gt;</span>
                http://ogc.bgs.ac.uk/terrafirma/metadata/TerraFirmaSRVMD.xml
            <span class="nt">&lt;/inspire_common:URL&gt;</span>
            <span class="nt">&lt;inspire_common:MediaType&gt;</span>application/xml<span class="nt">&lt;/inspire_common:MediaType&gt;</span>
        <span class="nt">&lt;/inspire_common:MetadataUrl&gt;</span>
        <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
            <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
                <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
            <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
        <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
        <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
            <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
        <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
        <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
            <span class="nt">&lt;inspire_common:Code&gt;</span>c8a4207f-adb8-43fc-ad70-8ae1f7d4b50d<span class="nt">&lt;/inspire_common:Code&gt;</span>
            <span class="nt">&lt;inspire_common:Namespace&gt;</span>http://ogc.bgs.ac.uk<span class="nt">&lt;/inspire_common:Namespace&gt;</span>
        <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;/inspire_dls:ExtendedCapabilities&gt;</span>
<span class="nt">&lt;/ows:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p>and finally for a WCS (INSPIRE download service) you could use something like:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WCS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;url&quot;</span>
<span class="s">&quot;WCS_INSPIRE_DSID_CODE&quot;</span> <span class="s">&quot;http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata&amp;layer=PARENTMATERIAL&amp;,http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata&amp;layer=REFIEFM&amp;,http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata&amp;layer=LVBATHY&amp;,http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata&amp;layer=POPN&amp;&quot;</span>
<span class="s">&quot;WCS_INSPIRE_METADATAURL_FORMAT&quot;</span> <span class="s">&quot;text/html&quot;</span>
<span class="s">&quot;WCS_INSPIRE_METADATAURL_HREF&quot;</span> <span class="s">&quot;http://ogc2.bgs.ac.uk/ARGI_UPP/&quot;</span>
<span class="s">&quot;WCS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
</pre></div>
</div>
<p>To create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ows:ExtendedCapabilities&gt;</span>
  <span class="nt">&lt;inspire_dls:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataUrl</span> <span class="na">xsi:type=</span><span class="s">&quot;inspire_common:resourceLocatorType&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;inspire_common:URL&gt;</span>http://ogc2.bgs.ac.uk/UGA_ARGI/<span class="nt">&lt;/inspire_common:URL&gt;</span>
      <span class="nt">&lt;inspire_common:MediaType&gt;</span>text/html<span class="nt">&lt;/inspire_common:MediaType&gt;</span>
    <span class="nt">&lt;/inspire_common:MetadataUrl&gt;</span>
    <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
      <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
        <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
      <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
    <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
    <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
      <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
    <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata<span class="ni">&amp;amp;</span>layer=PARENTMATERIAL<span class="ni">&amp;amp;</span><span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata<span class="ni">&amp;amp;</span>layer=REFIEFM<span class="ni">&amp;amp;</span><span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata<span class="ni">&amp;amp;</span>layer=LVBATHY<span class="ni">&amp;amp;</span><span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?request=GetMetadata<span class="ni">&amp;amp;</span>layer=POPN<span class="ni">&amp;amp;</span><span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
  <span class="nt">&lt;/inspire_dls:ExtendedCapabilities&gt;</span>
<span class="nt">&lt;/ows:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p>To add a scenario 2 INSPIRE extended capabilities section (where you have no external metadata document for your service) you could add the following parameters for a WMS:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WMS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
<span class="s">&quot;WMS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;embed&quot;</span>
<span class="s">&quot;WMS_INSPIRE_KEYWORD&quot;</span> <span class="s">&quot;infoMapAccessService&quot;</span>
<span class="s">&quot;WMS_INSPIRE_MPOC_EMAIL&quot;</span> <span class="s">&quot;enqiries@bgs.ac.uk&quot;</span>
<span class="s">&quot;WMS_INSPIRE_MPOC_NAME&quot;</span> <span class="s">&quot;Mr Matthew Harrison&quot;</span>
<span class="s">&quot;WMS_INSPIRE_METADATADATE&quot;</span> <span class="s">&quot;2014-03-28&quot;</span>
<span class="s">&quot;WMS_INSPIRE_RESOURCELOCATOR&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?&quot;</span>
<span class="s">&quot;WMS_INSPIRE_TEMPORAL_REFERENCE&quot;</span> <span class="s">&quot;2014-06-06&quot;</span>
</pre></div>
</div>
<p>Which would create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;inspire_vs:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_common:ResourceLocator&gt;</span>
        <span class="nt">&lt;inspire_common:URL&gt;</span>http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?<span class="nt">&lt;/inspire_common:URL&gt;</span>
    <span class="nt">&lt;/inspire_common:ResourceLocator&gt;</span>
    <span class="nt">&lt;inspire_common:ResourceType&gt;</span>service<span class="nt">&lt;/inspire_common:ResourceType&gt;</span>
    <span class="nt">&lt;inspire_common:TemporalReference&gt;</span>
        <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2014-06-06<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
    <span class="nt">&lt;/inspire_common:TemporalReference&gt;</span>
    <span class="nt">&lt;inspire_common:Conformity&gt;</span>
        <span class="nt">&lt;inspire_common:Specification&gt;</span>
            <span class="nt">&lt;inspire_common:Title&gt;</span>-<span class="nt">&lt;/inspire_common:Title&gt;</span>
            <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2014-06-06<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
        <span class="nt">&lt;/inspire_common:Specification&gt;</span>
        <span class="nt">&lt;inspire_common:Degree&gt;</span>notEvaluated<span class="nt">&lt;/inspire_common:Degree&gt;</span>
    <span class="nt">&lt;/inspire_common:Conformity&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataPointOfContact&gt;</span>
        <span class="nt">&lt;inspire_common:OrganisationName&gt;</span>Mr Matthew Harrison<span class="nt">&lt;/inspire_common:OrganisationName&gt;</span>
        <span class="nt">&lt;inspire_common:EmailAddress&gt;</span>enqiries@bgs.ac.uk<span class="nt">&lt;/inspire_common:EmailAddress&gt;</span>
    <span class="nt">&lt;/inspire_common:MetadataPointOfContact&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataDate&gt;</span>2014-03-28<span class="nt">&lt;/inspire_common:MetadataDate&gt;</span>
    <span class="nt">&lt;inspire_common:SpatialDataServiceType&gt;</span>view<span class="nt">&lt;/inspire_common:SpatialDataServiceType&gt;</span>
    <span class="nt">&lt;inspire_common:MandatoryKeyword&gt;</span>
        <span class="nt">&lt;inspire_common:KeywordValue&gt;</span>infoMapAccessService<span class="nt">&lt;/inspire_common:KeywordValue&gt;</span>
    <span class="nt">&lt;/inspire_common:MandatoryKeyword&gt;</span>
    <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
        <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
            <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
        <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
    <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
    <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
        <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
    <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
<span class="nt">&lt;/inspire_vs:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p>Similarly for an INSPIRE WFS (download) service you would use:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WFS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;embed&quot;</span>
<span class="s">&quot;WFS_INSPIRE_DSID_CODE&quot;</span> <span class="s">&quot;c8a4207f-adb8-43fc-ad70-8ae1f7d4b50d&quot;</span>
<span class="s">&quot;WFS_INSPIRE_DSID_NS&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk&quot;</span>
<span class="s">&quot;WFS_INSPIRE_KEYWORD&quot;</span> <span class="s">&quot;infoFeatureAccessService&quot;</span>
<span class="s">&quot;WFS_INSPIRE_MPOC_EMAIL&quot;</span> <span class="s">&quot;enqiries@bgs.ac.uk&quot;</span>
<span class="s">&quot;WFS_INSPIRE_MPOC_NAME&quot;</span> <span class="s">&quot;Mr Matthew Harrison&quot;</span>
<span class="s">&quot;WFS_INSPIRE_METADATADATE&quot;</span> <span class="s">&quot;2016-04-13&quot;</span>
<span class="s">&quot;WFS_INSPIRE_RESOURCELOCATOR&quot;</span> <span class="s">&quot;http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?&quot;</span>
<span class="s">&quot;WFS_INSPIRE_TEMPORAL_REFERENCE&quot;</span> <span class="s">&quot;2016-04-13&quot;</span>
<span class="s">&quot;WFS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
</pre></div>
</div>
<p>To create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ows:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_dls:ExtendedCapabilities&gt;</span>
        <span class="nt">&lt;inspire_common:ResourceLocator&gt;</span>
            <span class="nt">&lt;inspire_common:URL&gt;</span>http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?<span class="nt">&lt;/inspire_common:URL&gt;</span>
        <span class="nt">&lt;/inspire_common:ResourceLocator&gt;</span>
        <span class="nt">&lt;inspire_common:ResourceType&gt;</span>service<span class="nt">&lt;/inspire_common:ResourceType&gt;</span>
        <span class="nt">&lt;inspire_common:TemporalReference&gt;</span>
            <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2016-04-13<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
        <span class="nt">&lt;/inspire_common:TemporalReference&gt;</span>
        <span class="nt">&lt;inspire_common:Conformity&gt;</span>
            <span class="nt">&lt;inspire_common:Specification&gt;</span>
                <span class="nt">&lt;inspire_common:Title&gt;</span>-<span class="nt">&lt;/inspire_common:Title&gt;</span>
                <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2016-04-13<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
            <span class="nt">&lt;/inspire_common:Specification&gt;</span>
            <span class="nt">&lt;inspire_common:Degree&gt;</span>notEvaluated<span class="nt">&lt;/inspire_common:Degree&gt;</span>
        <span class="nt">&lt;/inspire_common:Conformity&gt;</span>
        <span class="nt">&lt;inspire_common:MetadataPointOfContact&gt;</span>
            <span class="nt">&lt;inspire_common:OrganisationName&gt;</span>Mr Matthew Harrison<span class="nt">&lt;/inspire_common:OrganisationName&gt;</span>
            <span class="nt">&lt;inspire_common:EmailAddress&gt;</span>enqiries@bgs.ac.uk<span class="nt">&lt;/inspire_common:EmailAddress&gt;</span>
        <span class="nt">&lt;/inspire_common:MetadataPointOfContact&gt;</span>
        <span class="nt">&lt;inspire_common:MetadataDate&gt;</span>2016-04-13<span class="nt">&lt;/inspire_common:MetadataDate&gt;</span>
        <span class="nt">&lt;inspire_common:SpatialDataServiceType&gt;</span>download<span class="nt">&lt;/inspire_common:SpatialDataServiceType&gt;</span>
        <span class="nt">&lt;inspire_common:MandatoryKeyword&gt;</span>
            <span class="nt">&lt;inspire_common:KeywordValue&gt;</span>infoFeatureAccessService<span class="nt">&lt;/inspire_common:KeywordValue&gt;</span>
        <span class="nt">&lt;/inspire_common:MandatoryKeyword&gt;</span>
        <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
            <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
                <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
            <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
        <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
        <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
            <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
        <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
        <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
            <span class="nt">&lt;inspire_common:Code&gt;</span>c8a4207f-adb8-43fc-ad70-8ae1f7d4b50d<span class="nt">&lt;/inspire_common:Code&gt;</span>
            <span class="nt">&lt;inspire_common:Namespace&gt;</span>http://ogc.bgs.ac.uk<span class="nt">&lt;/inspire_common:Namespace&gt;</span>
        <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;/inspire_dls:ExtendedCapabilities&gt;</span>
<span class="nt">&lt;/ows:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p>Finally for an INSPIRE WCS (download) service you could use:</p>
<div class="highlight-mapfile notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;WCS_INSPIRE_CAPABILITIES&quot;</span> <span class="s">&quot;embed&quot;</span>
<span class="s">&quot;WCS_INSPIRE_DSID_CODE&quot;</span> <span class="s">&quot;ARGI_UPP:PARENTMATERIAL,ARGI_UPP:REFIEFM,ARGI_UPP:LVBATHY,ARGI_UPP:POPN&quot;</span>
<span class="s">&quot;WCS_INSPIRE_KEYWORD&quot;</span> <span class="s">&quot;infoCoverageAccessService&quot;</span>
<span class="s">&quot;WCS_INSPIRE_MPOC_EMAIL&quot;</span> <span class="s">&quot;enqiries@bgs.ac.uk&quot;</span>
<span class="s">&quot;WCS_INSPIRE_MPOC_NAME&quot;</span> <span class="s">&quot;Mr Matthew Harrison&quot;</span>
<span class="s">&quot;WCS_INSPIRE_METADATADATE&quot;</span> <span class="s">&quot;2016-04-13&quot;</span>
<span class="s">&quot;WCS_INSPIRE_RESOURCELOCATOR&quot;</span> <span class="s">&quot;http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?&quot;</span>
<span class="s">&quot;WCS_INSPIRE_TEMPORAL_REFERENCE&quot;</span> <span class="s">&quot;2016-01-01&quot;</span>
<span class="s">&quot;WCS_LANGUAGES&quot;</span> <span class="s">&quot;eng&quot;</span>
</pre></div>
</div>
<p>To create:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;ows:ExtendedCapabilities&gt;</span>
  <span class="nt">&lt;inspire_dls:ExtendedCapabilities&gt;</span>
    <span class="nt">&lt;inspire_common:ResourceLocator&gt;</span>
      <span class="nt">&lt;inspire_common:URL&gt;</span>http://ogc2.bgs.ac.uk/cgi-bin/UGA_ARGI/ows?<span class="nt">&lt;/inspire_common:URL&gt;</span>
    <span class="nt">&lt;/inspire_common:ResourceLocator&gt;</span>
    <span class="nt">&lt;inspire_common:ResourceType&gt;</span>service<span class="nt">&lt;/inspire_common:ResourceType&gt;</span>
    <span class="nt">&lt;inspire_common:TemporalReference&gt;</span>
      <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2016-01-01<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
    <span class="nt">&lt;/inspire_common:TemporalReference&gt;</span>
    <span class="nt">&lt;inspire_common:Conformity&gt;</span>
      <span class="nt">&lt;inspire_common:Specification&gt;</span>
        <span class="nt">&lt;inspire_common:Title&gt;</span>-<span class="nt">&lt;/inspire_common:Title&gt;</span>
        <span class="nt">&lt;inspire_common:DateOfLastRevision&gt;</span>2016-01-01<span class="nt">&lt;/inspire_common:DateOfLastRevision&gt;</span>
      <span class="nt">&lt;/inspire_common:Specification&gt;</span>
      <span class="nt">&lt;inspire_common:Degree&gt;</span>notEvaluated<span class="nt">&lt;/inspire_common:Degree&gt;</span>
    <span class="nt">&lt;/inspire_common:Conformity&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataPointOfContact&gt;</span>
      <span class="nt">&lt;inspire_common:OrganisationName&gt;</span>James Passmore<span class="nt">&lt;/inspire_common:OrganisationName&gt;</span>
      <span class="nt">&lt;inspire_common:EmailAddress&gt;</span>enquiries@bgs.ac.uk<span class="nt">&lt;/inspire_common:EmailAddress&gt;</span>
    <span class="nt">&lt;/inspire_common:MetadataPointOfContact&gt;</span>
    <span class="nt">&lt;inspire_common:MetadataDate&gt;</span>2018-10-04<span class="nt">&lt;/inspire_common:MetadataDate&gt;</span>
    <span class="nt">&lt;inspire_common:SpatialDataServiceType&gt;</span>download<span class="nt">&lt;/inspire_common:SpatialDataServiceType&gt;</span>
    <span class="nt">&lt;inspire_common:MandatoryKeyword&gt;</span>
      <span class="nt">&lt;inspire_common:KeywordValue&gt;</span>infoCoverageAccessService<span class="nt">&lt;/inspire_common:KeywordValue&gt;</span>
    <span class="nt">&lt;/inspire_common:MandatoryKeyword&gt;</span>
    <span class="nt">&lt;inspire_common:SupportedLanguages&gt;</span>
      <span class="nt">&lt;inspire_common:DefaultLanguage&gt;</span>
        <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
      <span class="nt">&lt;/inspire_common:DefaultLanguage&gt;</span>
    <span class="nt">&lt;/inspire_common:SupportedLanguages&gt;</span>
    <span class="nt">&lt;inspire_common:ResponseLanguage&gt;</span>
      <span class="nt">&lt;inspire_common:Language&gt;</span>eng<span class="nt">&lt;/inspire_common:Language&gt;</span>
    <span class="nt">&lt;/inspire_common:ResponseLanguage&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>ARGI_UPP:PARENTMATERIAL<span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>ARGI_UPP:REFIEFM<span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>ARGI_UPP:LVBATHY<span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
    <span class="nt">&lt;inspire_dls:SpatialDataSetIdentifier&gt;</span>
      <span class="nt">&lt;inspire_common:Code&gt;</span>ARGI_UPP:POPN<span class="nt">&lt;/inspire_common:Code&gt;</span>
    <span class="nt">&lt;/inspire_dls:SpatialDataSetIdentifier&gt;</span>
  <span class="nt">&lt;/inspire_dls:ExtendedCapabilities&gt;</span>
<span class="nt">&lt;/ows:ExtendedCapabilities&gt;</span>
</pre></div>
</div>
<p><strong>Note 1</strong> Although MapServer supports multi-lingual GetCapabilities responses we don’t discuss them here because the OneGeology profile mandates having separate services per language offered.</p>
<p><strong>Note 2</strong> You don’t have to set a namespace separately for the SpatialDataSetIdentifier, and can have multiple datasets identified (by providing a comma separated list).  If you want to specify code and namespace and have multiple multiple codes, your lists must be the same length.</p>
<p><strong>Note 3</strong> Since MapServer version 7.2, by default filling in a complete set of service and layer metadata will also give you a full ISO 19139 XML metadata record for your dataset, which is available through a GetMetadata request, and is automatically added to your service where the GetCapabilites response supports a dataset metadata URL.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geoserver.html" class="btn btn-neutral float-left" title="Using GeoServer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="esri.html" class="btn btn-neutral float-right" title="Using ArcMap" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OneGeology.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>