

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Considerations for converting a MapServer based OneGeology-Europe service | OneGeology &mdash; OneGeology Documentation 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/OneGeology_favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Authors" href="../authors.html" />
    <link rel="prev" title="Mapping OneGeology-Europe data model to GeoSciML-Portrayal | OneGeology" href="appendixl.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> OneGeology Documentation
          

          
            
            <img src="../_static/Onegeology_logo_large.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../providingdata.html">Providing Data / Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portal.html">Using the OneGeology Portal</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="appendixa.html">Converting coordinate system in data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixb.html">Creating MapServer CLASS definitions from ArcView legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixc.html">Creating MapServer CLASS definitions from ARCGIS legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixd.html">Creating MapServer CLASS definitions using QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixe.html">BGS example service map file</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixf.html">WMS 1.3.0 GetCapabilities response from the BGS OneGeology exemplars service</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixg.html">WMS 1.1.1 GetCapabilities response from the BGS OneGeology exemplars service</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixh.html">Using the MS4W Apache http server as a reverse proxy to Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixi.html">OneGeology English keyword dictionary picklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixj.html">How to create a Styled Layer Descriptor (SLD) using Arc2Earth</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixk.html">Recommend ESRI shapefile definitions for GeoSciML-Portrayal</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixl.html">Mapping OneGeology-Europe data model to GeoSciML-Portrayal | OneGeology</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Considerations for converting a MapServer based OneGeology-Europe service | OneGeology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OneGeology Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../appendices.html">Appendices</a> &raquo;</li>
        
      <li>Considerations for converting a MapServer based OneGeology-Europe service | OneGeology</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/appendices/appendixL_1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="considerations-for-converting-a-mapserver-based-onegeology-europe-service-onegeology">
<h1>Considerations for converting a MapServer based OneGeology-Europe service | OneGeology<a class="headerlink" href="#considerations-for-converting-a-mapserver-based-onegeology-europe-service-onegeology" title="Permalink to this headline">Â¶</a></h1>
<div class="docutils container" id="outer-container">
<div class="docutils container" id="content">
<div class="fullwidth docutils container">
<p class="technical-progress-side-menu rubric" id="considerations-for-converting-a-mapserver-based-onegeology-europe-service">Considerations for converting a MapServer based
OneGeology-Europe service</p>
<p class="rubric" id="adding-inspire-extended-capabilities">Adding INSPIRE extended capabilities</p>
<p>When converting a MapServer (+ 1GE Connector) OneGeology-Europe
service to an INSPIRE compliant GeoSciML-Portrayal WMS (without
the 1GE Connector) the first thing you will need to do is
upgrade your MapServer version to 6.2.0 (or above) to ensure
you get the Extended Capabilities section.</p>
<p>To update/upgrade your MapServer (on Windows) installation you
have several options. The current tested option for 64-bit
Windows, Apache 2.4, and MapServer 6.4.1 is to use the
<a class="reference external" href="http://www.gisinternals.com/release.php">GISInternals</a>
supplied binaries, see <a class="reference external" href="4_4_3.html">section 4.4.3</a> for
details of how to install and configure such a service. The
original method for installing a MapServer for Windows (MS4W)
service for OneGeology services has recently been significantly
updated but we have not yet had an opportunity to check that it
installs and is configured it in the same way as described in
the cookbook for earlier versions. See <a class="reference external" href="http://www.ms4w.com/">http://www.ms4w.com/</a> for
further details. Another option is to install MapServer by
using the OSGeo4W binary distribution, see
<a class="reference external" href="http://trac.osgeo.org/osgeo4w/">http://trac.osgeo.org/osgeo4w/</a> for further details.</p>
<p>For example to add a scenario 1 INSPIRE extended capabilities
section (where you have an external XML document or service
that provides such a document containing metadata for your WMS
service) you would use the following parameters in your SERVICE
&gt; WEB &gt; METADATA:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;WMS_LANGUAGES&quot;</span> <span class="s2">&quot;eng&quot;</span>
<span class="s2">&quot;WMS_INSPIRE_CAPABILITIES&quot;</span> <span class="s2">&quot;URL&quot;</span>
<span class="s2">&quot;WMS_INSPIRE_METADATAURL_FORMAT&quot;</span> <span class="s2">&quot;application/xml&quot;</span>
<span class="s2">&quot;WMS_INSPIRE_METADATAURL_HREF&quot;</span>
<span class="s2">&quot;http://metadata.bgs.ac.uk/geonetwork/srv/en/csw?SERVICE=CSW&amp;REQUEST=GetRecordById&amp;</span>
<span class="n">ID</span><span class="o">=</span><span class="mf">7822e848</span><span class="o">-</span><span class="mi">822</span><span class="n">d</span><span class="o">-</span><span class="mi">45</span><span class="n">a5</span><span class="o">-</span><span class="mi">8584</span><span class="o">-</span><span class="mi">56</span><span class="n">d352fd2170</span><span class="o">&amp;</span><span class="n">elementSetName</span><span class="o">=</span><span class="n">full</span><span class="o">&amp;</span><span class="n">OutputSchema</span><span class="o">=</span><span class="n">csw</span><span class="p">:</span><span class="n">IsoRecord</span><span class="o">&amp;</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Which would create:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;inspire_vs:ExtendedCapabilities&gt;
    &lt;inspire_common:MetadataUrl xsi:type=&quot;inspire_common:resourceLocatorType&quot;&gt;
        &lt;inspire_common:URL&gt;http://metadata.bgs.ac.uk/geonetwork/srv/en/csw?SERVICE=CSW
        &amp;REQUEST=GetRecordById&amp;ID=7822e848-822d-45a5-8584-56d352fd2170&amp;elementSetName=full&amp;OutputSchema=csw:IsoRecord&amp;
        &lt;/inspire_common:URL&gt;
        &lt;inspire_common:MediaType&gt;application/xml&lt;/inspire_common:MediaType&gt;
    &lt;/inspire_common:MetadataUrl&gt;
    &lt;inspire_common:SupportedLanguages&gt;
        &lt;inspire_common:DefaultLanguage&gt;
            &lt;inspire_common:Language&gt;eng&lt;/inspire_common:Language&gt;
        &lt;/inspire_common:DefaultLanguage&gt;
    &lt;/inspire_common:SupportedLanguages&gt;
    &lt;inspire_common:ResponseLanguage&gt;
        &lt;inspire_common:Language&gt;eng&lt;/inspire_common:Language&gt;
    &lt;/inspire_common:ResponseLanguage&gt;
&lt;/inspire_vs:ExtendedCapabilities&gt;
</pre></div>
</div>
<p>Or to add a scenario 2 INSPIRE extended capabilities section
(where you have no external metadata document for your WMS
service) you could add the following parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#==================================================================================#</span>
<span class="c1"># INSPIRE extended capabilities</span>
<span class="c1"># Requires MapServer 6.2.0 and above, or the values are ignored</span>
<span class="c1">#==================================================================================#</span>
            <span class="s2">&quot;WMS_LANGUAGES&quot;</span> <span class="s2">&quot;eng&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_CAPABILITIES&quot;</span> <span class="s2">&quot;embed&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_KEYWORD&quot;</span> <span class="s2">&quot;infoMapAccessService&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_MPOC_EMAIL&quot;</span> <span class="s2">&quot;enqiries@bgs.ac.uk&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_MPOC_NAME&quot;</span> <span class="s2">&quot;Mr Matthew Harrison&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_METADATADATE&quot;</span> <span class="s2">&quot;2014-03-28&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_RESOURCELOCATOR&quot;</span> <span class="s2">&quot;http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?&quot;</span>
            <span class="s2">&quot;WMS_INSPIRE_TEMPORAL_REFERENCE&quot;</span> <span class="s2">&quot;2014-06-06&quot;</span>
</pre></div>
</div>
<p>Which would create:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;inspire_vs:ExtendedCapabilities&gt;
    &lt;inspire_common:ResourceLocator&gt;
        &lt;inspire_common:URL&gt;http://ogc.bgs.ac.uk/cgi-bin/TFL-PSI/ows?&lt;/inspire_common:URL&gt;
    &lt;/inspire_common:ResourceLocator&gt;
    &lt;inspire_common:ResourceType&gt;service&lt;/inspire_common:ResourceType&gt;
    &lt;inspire_common:TemporalReference&gt;
        &lt;inspire_common:DateOfLastRevision&gt;2014-06-06&lt;/inspire_common:DateOfLastRevision&gt;
    &lt;/inspire_common:TemporalReference&gt;
    &lt;inspire_common:Conformity&gt;
        &lt;inspire_common:Specification&gt;
            &lt;inspire_common:Title&gt;-&lt;/inspire_common:Title&gt;
            &lt;inspire_common:DateOfLastRevision&gt;2014-06-06&lt;/inspire_common:DateOfLastRevision&gt;
        &lt;/inspire_common:Specification&gt;
        &lt;inspire_common:Degree&gt;notEvaluated&lt;/inspire_common:Degree&gt;
    &lt;/inspire_common:Conformity&gt;
    &lt;inspire_common:MetadataPointOfContact&gt;
        &lt;inspire_common:OrganisationName&gt;Mr Matthew Harrison&lt;/inspire_common:OrganisationName&gt;
        &lt;inspire_common:EmailAddress&gt;enqiries@bgs.ac.uk&lt;/inspire_common:EmailAddress&gt;
    &lt;/inspire_common:MetadataPointOfContact&gt;
    &lt;inspire_common:MetadataDate&gt;2014-03-28&lt;/inspire_common:MetadataDate&gt;
    &lt;inspire_common:SpatialDataServiceType&gt;view&lt;/inspire_common:SpatialDataServiceType&gt;
    &lt;inspire_common:MandatoryKeyword&gt;
        &lt;inspire_common:KeywordValue&gt;infoMapAccessService&lt;/inspire_common:KeywordValue&gt;
    &lt;/inspire_common:MandatoryKeyword&gt;
    &lt;inspire_common:SupportedLanguages&gt;
        &lt;inspire_common:DefaultLanguage&gt;
            &lt;inspire_common:Language&gt;eng&lt;/inspire_common:Language&gt;
        &lt;/inspire_common:DefaultLanguage&gt;
    &lt;/inspire_common:SupportedLanguages&gt;
    &lt;inspire_common:ResponseLanguage&gt;
        &lt;inspire_common:Language&gt;eng&lt;/inspire_common:Language&gt;
    &lt;/inspire_common:ResponseLanguage&gt;
&lt;/inspire_vs:ExtendedCapabilities&gt;
</pre></div>
</div>
<p class="rubric" id="group-layering">Group layering</p>
<p>To conform to INSPIRE naming requirements for view services you
will probably need to group your layers; for example if you
have bedrock and surface geology layers in your 1GE service you
will need to do this, or if you have different layers for
surface age and surface lithology. See <a class="reference external" href="4_5.html">section
4.5</a> of this cookbook for details of how to
configure group layering.</p>
<p>When giving a name to your layers one suggestion is prepending
the INSPIRE MappedFeature group name to the individual layer
names (which should follow the OneGeology WMS profile naming
conventions), so for example if you have a number of layers for
geologic units (e.g. layers representing bedrock age, bedrock
lithology, surface age, and surface lithology) these would
according to INSPIRE naming rules need to be part of a layer
(e.g. within a grouped layer) called <em>GE.GeologicUnit</em>. The
OneGeology naming conventions for a layer (see <a class="reference external" href="2_5.html">section
2.5</a> for details) would suggest a name for the
surface age layer like <em>GBR_BGS_EN_1M_Surface_Age</em>, so
combining these we would get an INSPIRE plus OneGeology layer
name of <em>GE.GeologicUnit_GBR_BGS_EN_1M_Surface_Age</em>. This
convention is OK if you are intending to publish a WMS only
service, however if you also intend to publish a
GeoSciML-Portrayal WFS using the same configuration, you will
find that there is an issue with the Feature Identifiers that
is, your identifier will have a structure like
<em>GE.GeologicUnit_GBR_BGS_EN_1M_Surface_Age.10</em>, and such a
structure (with two or more dots) causes an error when doing a
GetFeature request by ID; as MapServer seems to regard
everything after the first dot as the feature identifier.</p>
<p>For example a request like:</p>
<p><code class="docutils literal notranslate"><span class="pre">http://.../BGS_OGE_Bedrock_and_Surface_Geology/ows?service=WFS&amp;request=GetFeature&amp;version=1.1.0&amp;FeatureID=GE.GeologicFault_BGS_EN_1M_Surface.10&amp;</span></code>
Results in the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;ows:ExceptionReport xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:ows=&quot;http://www.opengis.net/ows&quot; version=&quot;1.1.0&quot;
language=&quot;en-US&quot; xsi:schemaLocation=&quot;http://www.opengis.net/ows http://schemas.opengis.net/ows/1.0.0/owsExceptionReport.xsd&quot;&gt;
  &lt;ows:Exception exceptionCode=&quot;InvalidParameterValue&quot; locator=&quot;featureid&quot;&gt;
    &lt;ows:ExceptionText&gt;msWFSGetFeature(): WFS server error. Invalid FeatureId in GetFeature. Expecting layername.value : (null)&lt;/ows:ExceptionText&gt;
  &lt;/ows:Exception&gt;
&lt;/ows:ExceptionReport&gt;
</pre></div>
</div>
<p>If you are also publishing a GeoSciML-Portrayal WFS using the
same configuration, then you must either substitute underscores
for the dot in the INSPIRE name (<em>GE.GeologicUnit</em> becomes
<em>GE_GeologicUnit</em>) or omit the INSPIRE component completely.</p>
<p class="rubric" id="updating-the-class-files-and-data">Updating the class files and data</p>
<p>If your OneGeology-Europe service was based on a database, then
you will just need to use an INNER JOIN in the relevant
database tables using the mapping tables supplied in Appendix
L; that is you just need to add some new columns into the
database, using the GeoSciML-Portrayal names as the field
names. You can keep the original LAYER &gt; CLASSes in your map
file and be able to show both the original OneGeology symbology
(the default style), and also be able to provide different
portrayals through the application of an external SLD, such as
through the OneGeology portal.</p>
<p>If your OneGeology-Europe service was based on a shapefile, you
may need to create new classes (you can keep the old classes
and have these serve a different (original) symbology if
desired). You may need to create new classes for a service
based on a shapefile because a shapefile can only have field
names up to 10 characters long and GeoSciML-Portrayal requires
some field names up to 28 chararaters, (and the standard SLD
files such as those used by the portal expect the full
GeoSciML-Portrayal names). It is possible that you can get
around this restriction by using the GML aliasing ability (see
the WFS considerations section below for examples), but we have
not tested this for a GeoSciML-Portrayal WMS.</p>
<p class="rubric" id="handing-fields-for-which-you-have-no-data">Handing fields for which you have no data</p>
<p>As GeoSciML-Portrayal requires data (or URIs pointing to null
value reasons) for data that was not required in the
OneGeology-Europe services, you have a few options with
MapServer if you donât have the required data (for example a
specification_uri for all features). Option 1 would be to
create a column in the data source and populate the rows with
null value URIs (such as for example with the value
<a class="reference external" href="http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown/">http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown/</a>).
Option 2 would be to populate the missing values within the
GetFetaureInfo request template, such as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!-- MapServer Template --&gt;
&lt;dl&gt;
    &lt;dt&gt;identifier&lt;/dt&gt;
    &lt;dd&gt;[OBJECTID]&lt;/dd&gt;
    &lt;dt&gt;name&lt;/dt&gt;
    &lt;dd&gt;[Name]&lt;/dd&gt;
    &lt;dt&gt;faultType_uri&lt;/dt&gt;
    &lt;dd&gt;[faultType_uri]&lt;/dd&gt;
    &lt;dt&gt;positionalAccuracy (m)&lt;/dt&gt;
    &lt;dd&gt;[PositionalAccuracy]&lt;/dd&gt;
    &lt;dt&gt;movementType_uri&lt;/dt&gt;
    &lt;!-- Here we provide an INSPIRE nil reason for the missing movementType_uri --&gt;
    &lt;dd&gt;http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown&lt;/dd&gt;
    &lt;dt&gt;deformationStyle_uri&lt;/dt&gt;
    &lt;!-- Here we provide an INSPIRE nil reason for the missing deformationStyle_uri --&gt;
    &lt;dd&gt;http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unknown&lt;/dd&gt;
    &lt;dt&gt;representativeOlderAge_uri&lt;/dt&gt;
    &lt;dd&gt;[representativeOlderAge_uri]&lt;/dd&gt;
    &lt;dt&gt;representativeYoungerAge_uri&lt;/dt&gt;
    &lt;dd&gt;[representativeYoungerAge_uri]&lt;/dd&gt;
    &lt;dt&gt;representativeAge_uri&lt;/dt&gt;
    &lt;dd&gt;[representativeAge_uri]&lt;/dd&gt;
    &lt;dt&gt;specification_uri&lt;/dt&gt;
    &lt;!-- Here we supply a link to our Feature (using our Simple Fetaure GeoSciML-Portrayal WFS).
    This information isn&#39;t in the database and we can update to a full GeoSciML response when available
    In the actual template we have this as a link --&gt;
    &lt;dd&gt;http://ogc2.bgs.ac.uk/cgi-bin/BGS_OGE_Bedrock_and_Surface_Geology_in3/ows?service=WFS&amp;
    request=GetFeature&amp;version=1.1.0&amp;&amp;FeatureID=GBR_BGS_EN_1M_Surface_Fault.[OBJECTID]&amp;&lt;/dt&gt;
    &lt;!-- Here we supply a link to some metadata for our datasource that isn&#39;t in the database
    In the actual template we have this as a link --&gt;
    &lt;dd&gt;http://metadata.bgs.ac.uk/geonetwork/srv/en/iso19139.xml?id=6075&lt;/dd&gt;
&lt;/dl&gt;
</pre></div>
</div>
<p>Another option would be to configure some GML constants, see
the below section on WFS considerations for the configuration
details.</p>
<p class="rubric" id="geosciml-portrayal-simple-feature-gml-sf-0-wfs-considerations">GeoSciML-Portrayal (simple feature ~ GML SF-0) WFS
considerations</p>
<p>Whilst configuring a WFS is outside of the scope of this WMS
cookbook, the following section is included to help you migrate
your OneGeology-Europe (WMS+WFS) service to a
GeoSciML-Portrayal (WMS + WFS) service; it should be noted
however that such a simple feature WFS would not meet the
requirements for an INSPIRE compliant download service - a full
GeoSciML 4.0 complex property WFS is required for INSPIRE.</p>
<p>In the MAP &gt; WEB &gt; METADATA section you can set the default WFS
language, and also configure a namespace prefix and uri
GeoSciML-Portrayal for like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;WFS_LANGUAGES&quot;</span> <span class="s2">&quot;eng&quot;</span>
<span class="s2">&quot;WFS_NAMESPACE_PREFIX&quot;</span> <span class="s2">&quot;gmlsp&quot;</span>
<span class="s2">&quot;WFS_NAMESPACE_URI&quot;</span> <span class="s2">&quot;http://xmlns.geosciml.org/geosciml-portrayal/4.0&quot;</span>
</pre></div>
</div>
<p>In any LAYER &gt; METADATA section you can define any number of
GML constants. You can use this mecahnism as a way to add nil
values or other constant information that is missing from your
data source but required by the GeoSciML-Portrayal schema, or
simply because you wish to supply it.</p>
<p>In this example (below) we have used this mechanism to populate
specification_uri and metadata_uri which were required with
GeoSciML-Portrayal version 2; in the current version 4.0 these
propreties are now optional.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;GML_CONSTANTS&quot;</span> <span class="s2">&quot;specification_uri,metadata_uri&quot;</span>
<span class="s2">&quot;GML_metadata_uri_TYPE&quot;</span> <span class="s2">&quot;string&quot;</span>
<span class="s2">&quot;GML_metadata_uri_VALUE&quot;</span> <span class="s2">&quot;http://metadata.bgs.ac.uk/geonetwork/srv/en/iso19139.xml?id=6074&quot;</span>
<span class="s2">&quot;GML_specification_uri_TYPE&quot;</span> <span class="s2">&quot;string&quot;</span>
<span class="s2">&quot;GML_specification_uri_VALUE&quot;</span> <span class="s2">&quot;http://inspire.ec.europa.eu/codelist/VoidReasonValue/Unpopulated/&quot;</span>
</pre></div>
</div>
<p>Once a constant has been defined for a layer, the constant can
be access in a template using the standard notation.</p>
<p>In any LAYER &gt; METADATA section you can specify which items in
your datasource to include (or exclude) in your Feature
response, so in this below example we are saying effectively
include everything (GML_INCLUDE_ITEMS) except
(GML_EXCLUDE_ITEMS).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;GML_INCLUDE_ITEMS&quot;</span> <span class="s2">&quot;all&quot;</span>
<span class="s2">&quot;GML_EXCLUDE_ITEMS&quot;</span> <span class="s2">&quot;AgeMax,AgeMin,EventEnvironment,EventProcess,Lithology_1,ProportionTerms_1,GeologicUnitPartRole_1,Lithology_2,</span>
<span class="n">ProportionTerms_2</span><span class="p">,</span><span class="n">GeologicUnitPartRole_2</span><span class="p">,</span><span class="n">Lithology_3</span><span class="p">,</span><span class="n">ProportionTerms_3</span><span class="p">,</span><span class="n">GeologicUnitPartRole_3</span><span class="p">,</span><span class="n">Lithology_4</span><span class="p">,</span><span class="n">ProportionTerms_4</span><span class="p">,</span>
<span class="n">GeologicUnitPartRole_4</span><span class="p">,</span><span class="n">Lithology_5</span><span class="p">,</span><span class="n">ProportionTerms_5</span><span class="p">,</span><span class="n">GeologicUnitPartRole_5</span><span class="p">,</span><span class="n">MetamorphicGrade</span><span class="p">,</span><span class="n">NameIndex</span><span class="p">,</span><span class="n">BodyMorphology</span><span class="p">,</span>
<span class="n">SamplingFrame</span><span class="p">,</span><span class="n">GUObservationMethod</span><span class="p">,</span><span class="n">GUPurpose</span><span class="p">,</span><span class="n">SHAPE_Length</span><span class="p">,</span><span class="n">SHAPE_Area</span><span class="p">,</span><span class="n">RELEASED</span><span class="p">,</span><span class="n">gu_id</span><span class="p">,</span><span class="n">mf_id</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>In any LAYER &gt; METADATA section you can specify an alias to be
used in your feature response, so for example if your feature
identifier is called <em>OBJECTID</em> in your database you can alias
it to the required <em>identifier</em>, or if you want to change the
case of a field (or property) from <em>Name</em> to <em>name</em> you would
use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;GML_OBJECTID_ALIAS&quot;</span> <span class="s2">&quot;identifier&quot;</span>
<span class="s2">&quot;GML_Name_ALIAS&quot;</span> <span class="s2">&quot;name&quot;</span>
</pre></div>
</div>
<p>You can specify your own grouping of the properties (and the
order in which they appear) within a feature and give this
grouping a name like below. If you have used any aliases you
must reference the original name and not the alias value in the
grouping, though the alias will appear in the output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;GML_GROUPS&quot;</span> <span class="s2">&quot;ShearDisplacementStructureView&quot;</span>
<span class="s2">&quot;GML_ShearDisplacementStructureView_GROUP&quot;</span> <span class="s2">&quot;OBJECTID,Name,faultType,observationMethod,positionalAccuracy,faultType_uri,</span>
<span class="n">movementType_uri</span><span class="p">,</span><span class="n">deformationStyle_uri</span><span class="p">,</span><span class="n">representativeAge_uri</span><span class="p">,</span><span class="n">representativeOlderAge_uri</span><span class="p">,</span><span class="n">representativeYoungerAge_uri</span><span class="p">,</span>
<span class="n">specification_uri</span><span class="p">,</span><span class="n">metadata_uri</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Section last modified: 10 December 2015</p>
<p><a class="reference external" href="appendixL.html">Back</a> | <a class="reference external" href="home.html">Next</a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../authors.html" class="btn btn-neutral float-right" title="Authors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="appendixl.html" class="btn btn-neutral float-left" title="Mapping OneGeology-Europe data model to GeoSciML-Portrayal | OneGeology" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, OneGeology.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>