

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Converting coordinate system in data files &mdash; OneGeology Documentation 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/OneGeology_favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating MapServer CLASS definitions from ArcView legends" href="appendixb.html" />
    <link rel="prev" title="Appendices" href="../appendices.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> OneGeology Documentation
          

          
            
            <img src="../_static/Onegeology_logo_large.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../providingdata.html">Providing Data / Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../portal.html">Using the OneGeology Portal</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../appendices.html">Appendices</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Converting coordinate system in data files</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixb.html">Creating MapServer CLASS definitions from ArcView legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixc.html">Creating MapServer CLASS definitions from ARCGIS legends</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixd.html">Creating MapServer CLASS definitions using QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixe.html">BGS example service map file</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixf.html">WMS 1.3.0 GetCapabilities response from the BGS OneGeology exemplars service</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixg.html">WMS 1.1.1 GetCapabilities response from the BGS OneGeology exemplars service</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixh.html">Using the MS4W Apache http server as a reverse proxy to Tomcat</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixi.html">OneGeology English keyword dictionary picklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixj.html">How to create a Styled Layer Descriptor (SLD) using Arc2Earth</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixk.html">Recommend ESRI shapefile definitions for GeoSciML-Portrayal</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixl.html">Mapping OneGeology-Europe data model to GeoSciML-Portrayal | OneGeology</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendixL_1.html">Considerations for converting a MapServer based OneGeology-Europe service | OneGeology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">OneGeology Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../appendices.html">Appendices</a> &raquo;</li>
        
      <li>Converting coordinate system in data files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/appendices/appendixa.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="converting-coordinate-system-in-data-files">
<h1>Converting coordinate system in data files<a class="headerlink" href="#converting-coordinate-system-in-data-files" title="Permalink to this headline">¶</a></h1>
<div class="docutils container" id="outer-container">
<div class="docutils container" id="content">
<div class="fullwidth docutils container">
<p class="technical-progress-side-menu rubric" id="appendix-a-converting-coordinate-system-in-data-files">Appendix A: Converting coordinate system in data
files</p>
<p>As mentioned in the documentation on setting up the WMS, the
OneGeology project requires that your WMS can serve data in
latitude-longitude coordinates with the WGS84 ellipsoid and
datum (EPSG:4326). If your data files are stored in a different
coordinate reference system, MapServer can convert the
coordinates to EPSG:4326 or other client requested coordinate
reference systems on-the-fly. However, to reduce the load on
your server, as we can expect that a substantial proportion of
requests to OneGeology servers will be for EPSG:4326 then we
suggest that you convert your underlying data sets to this
coordinate reference system so that the conversion won’t have
to be carried out on every request. The same tools that
MapServer uses internally are available with command line
programs bundled in the MS4W package and can be used to convert
your underlying data sets as follows.</p>
<p>For shapefiles the main program you will want to use is
ogr2ogr.exe which is located in ms4wtoolsgdal-ogr where ms4w
is the top-level folder of your MS4W installation. The easiest
way to use the programs is to run the batch file
ms4wsetenv.bat from a DOS window which will set up your path.
(You may need to edit the setenv.bat file to reflect the
location where you have installed MS4W.) Next you need to find
out whether your current data set has a coordinate reference
system assigned to it. If you have, for example, a dataset in a
shapefile called datafile.shp you would issue a command like:</p>
<p><strong>:\ &gt; ogrinfo -so datafile.shp datafile</strong></p>
<p>(The first datafile.shp refers to the file name; the datafile
afterwards is a layer name which is redundant in the case of
shapefiles which only have one layer but is the way ogrinfo
works.) You should get some information including something
like that below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Layer</span> <span class="n">SRS</span> <span class="n">WKT</span><span class="p">:</span>
<span class="n">PROJCS</span><span class="p">[</span><span class="s2">&quot;British_National_Grid&quot;</span><span class="p">,</span>
 <span class="n">GEOGCS</span><span class="p">[</span><span class="s2">&quot;GCS_OSGB_1936&quot;</span><span class="p">,</span>
 <span class="n">DATUM</span><span class="p">[</span><span class="s2">&quot;OSGB_1936&quot;</span><span class="p">,</span>
 <span class="n">SPHEROID</span><span class="p">[</span><span class="s2">&quot;Airy_1830&quot;</span><span class="p">,</span><span class="mf">6377563.396</span><span class="p">,</span><span class="mf">299.3249646</span><span class="p">]],</span>
 <span class="n">PRIMEM</span><span class="p">[</span><span class="s2">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span>
 <span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;Degree&quot;</span><span class="p">,</span><span class="mf">0.0174532925199433</span><span class="p">]],</span>
 <span class="n">PROJECTION</span><span class="p">[</span><span class="s2">&quot;Transverse_Mercator&quot;</span><span class="p">],</span>
 <span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;False_Easting&quot;</span><span class="p">,</span><span class="mf">400000.0</span><span class="p">],</span>
 <span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;False_Northing&quot;</span><span class="p">,</span><span class="o">-</span><span class="mf">100000.0</span><span class="p">],</span>
 <span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;Central_Meridian&quot;</span><span class="p">,</span><span class="o">-</span><span class="mf">2.0</span><span class="p">],</span>
 <span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;Scale_Factor&quot;</span><span class="p">,</span><span class="mf">0.</span>  <span class="mi">999601272</span><span class="p">],</span>
 <span class="n">PARAMETER</span><span class="p">[</span><span class="s2">&quot;Latitude_Of_Origin&quot;</span><span class="p">,</span><span class="mf">49.0</span><span class="p">],</span>
 <span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;Meter&quot;</span><span class="p">,</span><span class="mf">1.0</span><span class="p">]]</span>
</pre></div>
</div>
<p>The details do not matter as long as you don’t get the below:</p>
<div class="line-block">
<div class="line">Layer SRS WKT:</div>
<div class="line">(unknown)</div>
</div>
<p>In this situation you will need to find out what coordinate
system your data is in. If the data has a coordinate system
assigned you can issue a command like that below to convert the
data (note that the destination file is specified before the
source file):</p>
<p><strong>:\ &gt; ogr2ogr -t_srs EPSG:4326 new_datafile.shp
datafile.shp</strong></p>
<p>If your data set does not have a coordinate system assigned to
it but you have found out what it is you can specify the source
coordinate system on the command line with the parameter
-s_srs, for example:</p>
<p><strong>:\ &gt; ogr2ogr -s_srs EPSG:27700 -t_srs EPSG:4326
new_datafile.shp datafile.shp</strong></p>
<p>For GeoTIFF files the utilities you will want to use are
gdalinfo.exe and gdalwarp.exe. Issuing a command like: gdalinfo
imagefile.tif will result in some information including
projection information like that below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Driver</span><span class="p">:</span> <span class="n">GTiff</span><span class="o">/</span><span class="n">GeoTIFF</span>
<span class="n">Size</span> <span class="ow">is</span> <span class="mi">522</span><span class="p">,</span> <span class="mi">252</span>
<span class="n">Coordinate</span> <span class="n">System</span> <span class="ow">is</span><span class="p">:</span>
<span class="n">GEOGCS</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span>
 <span class="n">DATUM</span><span class="p">[</span><span class="s2">&quot;WGS_1984&quot;</span><span class="p">,</span>
 <span class="n">SPHEROID</span><span class="p">[</span><span class="s2">&quot;WGS 84&quot;</span><span class="p">,</span><span class="mi">6378137</span><span class="p">,</span><span class="mf">298.2572235630016</span><span class="p">,</span>
 <span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;7030&quot;</span><span class="p">]],</span>
 <span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;6326&quot;</span><span class="p">]],</span>
 <span class="n">PRIMEM</span><span class="p">[</span><span class="s2">&quot;Greenwich&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
 <span class="n">UNIT</span><span class="p">[</span><span class="s2">&quot;degree&quot;</span><span class="p">,</span><span class="mf">0.0174532925199433</span><span class="p">],</span>
 <span class="n">AUTHORITY</span><span class="p">[</span><span class="s2">&quot;EPSG&quot;</span><span class="p">,</span><span class="s2">&quot;4326&quot;</span><span class="p">]]</span>
<span class="n">Origin</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">180.</span><span class="p">,</span><span class="mi">000000000000000</span><span class="p">,</span><span class="mf">83.879999999999995</span><span class="p">)</span>
<span class="n">Pixel</span> <span class="n">Size</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.690000000000000</span><span class="p">,</span><span class="o">-</span><span class="mf">0.690000000000000</span><span class="p">)</span>
<span class="n">Metadata</span><span class="p">:</span>
</pre></div>
</div>
<p>You can transform an image in a similar way to the ogr2ogr
utility for shapefiles but unlike ogr2ogr the source and
destination files are specified in the more common source then
destination file order so typical command lines would be:</p>
<p><strong>:\ &gt; gdalwarp —t_srs EPSG:4326 imagefile.tif
new_imagefile.tif</strong></p>
<p>or</p>
<p><strong>:\ &gt; gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326
imagefile.tif new_imagefile.tif</strong></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="appendixb.html" class="btn btn-neutral float-right" title="Creating MapServer CLASS definitions from ArcView legends" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../appendices.html" class="btn btn-neutral float-left" title="Appendices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, OneGeology.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>